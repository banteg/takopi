{"path": "/tmp/pytest-of-root/pytest-86/test_watch_config_applies_runt0/takopi.toml", "event": "config.reload.applied", "timestamp": "2026-01-15T22:16:54.240626Z", "level": "info", "logger": "takopi.config_watch"}
{"channel_id": 123, "user_msg_id": 10, "resume": null, "text": "hi", "event": "handle.incoming", "timestamp": "2026-01-15T22:16:54.273298Z", "level": "info", "logger": "takopi.runner_bridge"}
{"ok": true, "error": null, "answer_len": 2, "elapsed_s": 0.0, "action_count": 0, "resume": "d227b7353dc448ff9837aabcdc58edb0", "event": "runner.completed", "timestamp": "2026-01-15T22:16:54.273962Z", "level": "info", "logger": "takopi.runner_bridge"}
{"channel_id": 123, "user_msg_id": 10, "resume": "sid", "text": "do this\n`codex resume sid`\nand that", "event": "handle.incoming", "timestamp": "2026-01-15T22:16:54.274993Z", "level": "info", "logger": "takopi.runner_bridge"}
{"ok": true, "error": null, "answer_len": 2, "elapsed_s": 0.0, "action_count": 0, "resume": "sid", "event": "runner.completed", "timestamp": "2026-01-15T22:16:54.275494Z", "level": "info", "logger": "takopi.runner_bridge"}
{"channel_id": 123, "user_msg_id": 10, "resume": null, "text": "hi", "event": "handle.incoming", "timestamp": "2026-01-15T22:16:54.276472Z", "level": "info", "logger": "takopi.runner_bridge"}
{"ok": true, "error": null, "answer_len": 10000, "elapsed_s": 0.0, "action_count": 0, "resume": "63d943f7551d4526b197d1b802c5a9e9", "event": "runner.completed", "timestamp": "2026-01-15T22:16:54.276929Z", "level": "info", "logger": "takopi.runner_bridge"}
{"channel_id": 123, "user_msg_id": 10, "resume": null, "text": "hi", "event": "handle.incoming", "timestamp": "2026-01-15T22:16:54.277944Z", "level": "info", "logger": "takopi.runner_bridge"}
{"ok": true, "error": null, "answer_len": 2, "elapsed_s": 1.0, "action_count": 2, "resume": "6951536dcfee4b10ab6b0af70c59c07e", "event": "runner.completed", "timestamp": "2026-01-15T22:16:54.278520Z", "level": "info", "logger": "takopi.runner_bridge"}
{"channel_id": 123, "user_msg_id": 42, "resume": null, "text": "do it", "event": "handle.incoming", "timestamp": "2026-01-15T22:16:54.279503Z", "level": "info", "logger": "takopi.runner_bridge"}
{"ok": true, "error": null, "answer_len": 4, "elapsed_s": 2.1, "action_count": 1, "resume": "123e4567-e89b-12d3-a456-426614174000", "event": "runner.completed", "timestamp": "2026-01-15T22:16:54.280034Z", "level": "info", "logger": "takopi.runner_bridge"}
{"channel_id": 123, "user_msg_id": 42, "resume": null, "text": "do it", "event": "handle.incoming", "timestamp": "2026-01-15T22:16:54.281004Z", "level": "info", "logger": "takopi.runner_bridge"}
{"ok": true, "error": null, "answer_len": 4, "elapsed_s": 0.0, "action_count": 0, "resume": "123e4567-e89b-12d3-a456-426614174000", "event": "runner.completed", "timestamp": "2026-01-15T22:16:54.281450Z", "level": "info", "logger": "takopi.runner_bridge"}
{"channel_id": 123, "user_msg_id": 10, "resume": null, "text": "do something", "event": "handle.incoming", "timestamp": "2026-01-15T22:16:54.282433Z", "level": "info", "logger": "takopi.runner_bridge"}
{"resume": "019b66fc-64c2-7a71-81cd-081c504cfeb2", "elapsed_s": 0.0004692829679697752, "event": "handle.cancelled", "timestamp": "2026-01-15T22:16:54.282986Z", "level": "info", "logger": "takopi.runner_bridge"}
{"channel_id": 123, "user_msg_id": 10, "resume": null, "text": "do something", "event": "handle.incoming", "timestamp": "2026-01-15T22:16:54.284000Z", "level": "info", "logger": "takopi.runner_bridge"}
{"error": "unhandled errors in a TaskGroup (1 sub-exception)", "error_type": "ExceptionGroup", "exc_info": true, "event": "handle.runner_failed", "timestamp": "2026-01-15T22:16:54.284403Z", "level": "error", "logger": "takopi.runner_bridge"}
{"engine": "codex", "resume": null, "prompt": "hello", "prompt_len": 5, "event": "runner.start", "timestamp": "2026-01-15T22:16:54.488655Z", "level": "info", "logger": "takopi.runners.codex"}
{"cmd": "/tmp/pytest-of-root/pytest-86/test_run_serializes_new_sessio1/codex", "args": ["exec", "--json", "--skip-git-repo-check", "--color=never", "-"], "pid": 433830, "event": "subprocess.spawn", "timestamp": "2026-01-15T22:16:54.489530Z", "level": "info", "logger": "takopi.runners.codex"}
{"pid": 433830, "resume": null, "bytes": 5, "event": "subprocess.stdin.send", "timestamp": "2026-01-15T22:16:54.489735Z", "level": "info", "logger": "takopi.runners.codex"}
{"pid": 433830, "rc": 0, "event": "subprocess.exit", "timestamp": "2026-01-15T22:16:54.520193Z", "level": "info", "logger": "takopi.runners.codex"}
{"resume": "019b73c4-0c3f-7701-a0bb-aac6b4d8a3bc", "event": "codex.session.completed", "timestamp": "2026-01-15T22:16:54.520277Z", "level": "info", "logger": "takopi.runners.codex"}
{"engine": "codex", "resume": "019b73c4-0c3f-7701-a0bb-aac6b4d8a3bc", "prompt": "resume", "prompt_len": 6, "event": "runner.start", "timestamp": "2026-01-15T22:16:54.520428Z", "level": "info", "logger": "takopi.runners.codex"}
{"cmd": "/tmp/pytest-of-root/pytest-86/test_run_serializes_new_sessio1/codex", "args": ["exec", "--json", "--skip-git-repo-check", "--color=never", "resume", "019b73c4-0c3f-7701-a0bb-aac6b4d8a3bc", "-"], "pid": 433832, "event": "subprocess.spawn", "timestamp": "2026-01-15T22:16:54.521175Z", "level": "info", "logger": "takopi.runners.codex"}
{"pid": 433832, "resume": "019b73c4-0c3f-7701-a0bb-aac6b4d8a3bc", "bytes": 6, "event": "subprocess.stdin.send", "timestamp": "2026-01-15T22:16:54.521392Z", "level": "info", "logger": "takopi.runners.codex"}
{"pid": 433832, "rc": 0, "event": "subprocess.exit", "timestamp": "2026-01-15T22:16:54.540536Z", "level": "info", "logger": "takopi.runners.codex"}
{"resume": "019b73c4-0c3f-7701-a0bb-aac6b4d8a3bc", "event": "codex.session.completed", "timestamp": "2026-01-15T22:16:54.540634Z", "level": "info", "logger": "takopi.runners.codex"}
{"engine": "codex", "resume": null, "prompt": "hi", "prompt_len": 2, "event": "runner.start", "timestamp": "2026-01-15T22:16:54.542961Z", "level": "info", "logger": "takopi.runners.codex"}
{"cmd": "/tmp/pytest-of-root/pytest-86/test_codex_runner_preserves_wa0/codex", "args": ["exec", "--json", "--skip-git-repo-check", "--color=never", "-"], "pid": 433834, "event": "subprocess.spawn", "timestamp": "2026-01-15T22:16:54.544059Z", "level": "info", "logger": "takopi.runners.codex"}
{"pid": 433834, "resume": null, "bytes": 2, "event": "subprocess.stdin.send", "timestamp": "2026-01-15T22:16:54.544330Z", "level": "info", "logger": "takopi.runners.codex"}
{"pid": 433834, "rc": 0, "event": "subprocess.exit", "timestamp": "2026-01-15T22:16:54.574256Z", "level": "info", "logger": "takopi.runners.codex"}
{"resume": "019b73c4-0c3f-7701-a0bb-aac6b4d8a3bc", "event": "codex.session.completed", "timestamp": "2026-01-15T22:16:54.574379Z", "level": "info", "logger": "takopi.runners.codex"}
{"engine": "codex", "resume": null, "prompt": "hi", "prompt_len": 2, "event": "runner.start", "timestamp": "2026-01-15T22:16:54.576262Z", "level": "info", "logger": "takopi.runners.codex"}
{"cmd": "/tmp/pytest-of-root/pytest-86/test_codex_runner_reconnect_no0/codex", "args": ["exec", "--json", "--skip-git-repo-check", "--color=never", "-"], "pid": 433836, "event": "subprocess.spawn", "timestamp": "2026-01-15T22:16:54.576980Z", "level": "info", "logger": "takopi.runners.codex"}
{"pid": 433836, "resume": null, "bytes": 2, "event": "subprocess.stdin.send", "timestamp": "2026-01-15T22:16:54.577148Z", "level": "info", "logger": "takopi.runners.codex"}
{"pid": 433836, "rc": 0, "event": "subprocess.exit", "timestamp": "2026-01-15T22:16:54.601403Z", "level": "info", "logger": "takopi.runners.codex"}
{"resume": "019b73c4-0c3f-7701-a0bb-aac6b4d8a3bc", "event": "codex.session.completed", "timestamp": "2026-01-15T22:16:54.601572Z", "level": "info", "logger": "takopi.runners.codex"}
{"engine": "codex", "resume": null, "prompt": "hi", "prompt_len": 2, "event": "runner.start", "timestamp": "2026-01-15T22:16:54.604910Z", "level": "info", "logger": "takopi.runners.codex"}
{"cmd": "/tmp/pytest-of-root/pytest-86/test_codex_runner_reconnect_no1/codex", "args": ["exec", "--json", "--skip-git-repo-check", "--color=never", "-"], "pid": 433838, "event": "subprocess.spawn", "timestamp": "2026-01-15T22:16:54.606158Z", "level": "info", "logger": "takopi.runners.codex"}
{"pid": 433838, "resume": null, "bytes": 2, "event": "subprocess.stdin.send", "timestamp": "2026-01-15T22:16:54.606498Z", "level": "info", "logger": "takopi.runners.codex"}
{"pid": 433838, "rc": 0, "event": "subprocess.exit", "timestamp": "2026-01-15T22:16:54.642116Z", "level": "info", "logger": "takopi.runners.codex"}
{"engine": "codex", "resume": null, "prompt": "hi", "prompt_len": 2, "event": "runner.start", "timestamp": "2026-01-15T22:16:54.645265Z", "level": "info", "logger": "takopi.runners.codex"}
{"cmd": "/tmp/pytest-of-root/pytest-86/test_codex_runner_includes_std0/codex", "args": ["exec", "--json", "--skip-git-repo-check", "--color=never", "-"], "pid": 433840, "event": "subprocess.spawn", "timestamp": "2026-01-15T22:16:54.646512Z", "level": "info", "logger": "takopi.runners.codex"}
{"pid": 433840, "resume": null, "bytes": 2, "event": "subprocess.stdin.send", "timestamp": "2026-01-15T22:16:54.646793Z", "level": "info", "logger": "takopi.runners.codex"}
{"pid": 433840, "rc": 1, "event": "subprocess.exit", "timestamp": "2026-01-15T22:16:54.660824Z", "level": "info", "logger": "takopi.runners.codex"}
{"engine": "codex", "resume": null, "prompt": "one", "prompt_len": 3, "event": "runner.start", "timestamp": "2026-01-15T22:16:54.663030Z", "level": "info", "logger": "takopi.runners.codex"}
{"engine": "codex", "resume": null, "prompt": "two", "prompt_len": 3, "event": "runner.start", "timestamp": "2026-01-15T22:16:54.663160Z", "level": "info", "logger": "takopi.runners.codex"}
{"cmd": "/tmp/pytest-of-root/pytest-86/test_run_serializes_two_new_se0/codex", "args": ["exec", "--json", "--skip-git-repo-check", "--color=never", "-"], "pid": 433842, "event": "subprocess.spawn", "timestamp": "2026-01-15T22:16:54.664603Z", "level": "info", "logger": "takopi.runners.codex"}
{"cmd": "/tmp/pytest-of-root/pytest-86/test_run_serializes_two_new_se0/codex", "args": ["exec", "--json", "--skip-git-repo-check", "--color=never", "-"], "pid": 433844, "event": "subprocess.spawn", "timestamp": "2026-01-15T22:16:54.664800Z", "level": "info", "logger": "takopi.runners.codex"}
{"pid": 433842, "resume": null, "bytes": 3, "event": "subprocess.stdin.send", "timestamp": "2026-01-15T22:16:54.665030Z", "level": "info", "logger": "takopi.runners.codex"}
{"pid": 433844, "resume": null, "bytes": 3, "event": "subprocess.stdin.send", "timestamp": "2026-01-15T22:16:54.665204Z", "level": "info", "logger": "takopi.runners.codex"}
{"pid": 433842, "rc": 0, "event": "subprocess.exit", "timestamp": "2026-01-15T22:16:54.688549Z", "level": "info", "logger": "takopi.runners.codex"}
{"resume": "019b73c4-0c3f-7701-a0bb-aac6b4d8a3bc", "event": "codex.session.completed", "timestamp": "2026-01-15T22:16:54.688679Z", "level": "info", "logger": "takopi.runners.codex"}
{"pid": 433844, "rc": 0, "event": "subprocess.exit", "timestamp": "2026-01-15T22:16:54.689144Z", "level": "info", "logger": "takopi.runners.codex"}
{"resume": "019b73c4-0c3f-7701-a0bb-aac6b4d8a3bc", "event": "codex.session.completed", "timestamp": "2026-01-15T22:16:54.689223Z", "level": "info", "logger": "takopi.runners.codex"}
{"engine": "dummy-jsonl", "resume": null, "prompt": "hello", "prompt_len": 5, "event": "runner.start", "timestamp": "2026-01-15T22:16:54.848527Z", "level": "info", "logger": "takopi.runner"}
{"cmd": "dummy", "args": [], "pid": 123, "event": "subprocess.spawn", "timestamp": "2026-01-15T22:16:54.848643Z", "level": "info", "logger": "takopi.runner"}
{"pid": 123, "rc": 0, "event": "subprocess.exit", "timestamp": "2026-01-15T22:16:54.848881Z", "level": "info", "logger": "takopi.runner"}
{"engine": "dummy-jsonl", "resume": null, "prompt": "hello", "prompt_len": 5, "event": "runner.start", "timestamp": "2026-01-15T22:16:54.849962Z", "level": "info", "logger": "takopi.runner"}
{"cmd": "dummy", "args": [], "pid": 456, "event": "subprocess.spawn", "timestamp": "2026-01-15T22:16:54.850052Z", "level": "info", "logger": "takopi.runner"}
{"pid": 456, "jsonl_seq": 2, "line": "invalid", "event": "runner.jsonl.invalid", "timestamp": "2026-01-15T22:16:54.850192Z", "level": "info", "logger": "takopi.runner"}
{"pid": 456, "rc": 0, "event": "subprocess.exit", "timestamp": "2026-01-15T22:16:54.850439Z", "level": "info", "logger": "takopi.runner"}
{"migration": "legacy-telegram", "path": "/tmp/pytest-of-root/pytest-86/test_legacy_keys_migrated0/takopi.toml", "event": "config.migrated", "timestamp": "2026-01-15T22:16:54.879781Z", "level": "info", "logger": "takopi.config_migrations"}
{"count": 158, "limit": 100, "event": "startup.command_menu.too_many", "timestamp": "2026-01-15T22:16:54.930020Z", "level": "warning", "logger": "takopi.telegram.commands.menu"}
{"chat_id": 123, "progress_message_id": 42, "event": "cancel.requested", "timestamp": "2026-01-15T22:16:54.945604Z", "level": "info", "logger": "takopi.telegram.commands.cancel"}
{"chat_id": 123, "progress_message_id": 1, "event": "cancel.requested", "timestamp": "2026-01-15T22:16:54.946705Z", "level": "info", "logger": "takopi.telegram.commands.cancel"}
{"chat_id": 123, "progress_message_id": 55, "resume": "sid", "event": "cancel.queued", "timestamp": "2026-01-15T22:16:54.947812Z", "level": "info", "logger": "takopi.telegram.commands.cancel"}
{"chat_id": 123, "progress_message_id": 42, "event": "cancel.requested", "timestamp": "2026-01-15T22:16:54.953373Z", "level": "info", "logger": "takopi.telegram.commands.cancel"}
{"chat_id": 123, "progress_message_id": 77, "resume": "sid", "event": "cancel.queued", "timestamp": "2026-01-15T22:16:54.954482Z", "level": "info", "logger": "takopi.telegram.commands.cancel"}
{"channel_id": 123, "user_msg_id": 1, "resume": null, "text": "hello", "event": "handle.incoming", "engine": "codex", "chat_id": 123, "timestamp": "2026-01-15T22:16:54.979891Z", "level": "info", "logger": "takopi.runner_bridge"}
{"ok": true, "error": null, "answer_len": 2, "elapsed_s": 0.0, "action_count": 0, "resume": "resume-123", "event": "runner.completed", "engine": "codex", "user_msg_id": 1, "chat_id": 123, "timestamp": "2026-01-15T22:16:54.980466Z", "level": "info", "logger": "takopi.runner_bridge"}
{"commands": ["codex", "new", "agent", "model", "reasoning", "trigger", "cancel"], "event": "startup.command_menu.updated", "timestamp": "2026-01-15T22:16:54.986255Z", "level": "info", "logger": "takopi.telegram.commands.menu"}
{"channel_id": 123, "user_msg_id": 1, "resume": null, "text": "first", "event": "handle.incoming", "engine": "codex", "chat_id": 123, "timestamp": "2026-01-15T22:16:55.987830Z", "level": "info", "logger": "takopi.runner_bridge"}
{"channel_id": 123, "user_msg_id": 2, "resume": "abc123", "text": "followup", "event": "handle.incoming", "engine": "codex", "chat_id": 123, "timestamp": "2026-01-15T22:16:56.039259Z", "level": "info", "logger": "takopi.runner_bridge"}
{"state_path": "/tmp/pytest-of-root/pytest-86/test_run_main_loop_persists_to0/telegram_chat_prefs_state.json", "event": "chat_prefs.enabled", "timestamp": "2026-01-15T22:16:56.045549Z", "level": "info", "logger": "takopi.telegram.loop"}
{"scope": "projects", "resolved_scope": "projects", "state_path": "/tmp/pytest-of-root/pytest-86/test_run_main_loop_persists_to0/telegram_topics_state.json", "event": "topics.enabled", "timestamp": "2026-01-15T22:16:56.045694Z", "level": "info", "logger": "takopi.telegram.loop"}
{"commands": ["codex", "takopi", "new", "agent", "model", "reasoning", "trigger", "topic", "ctx", "cancel"], "event": "startup.command_menu.updated", "timestamp": "2026-01-15T22:16:56.048441Z", "level": "info", "logger": "takopi.telegram.commands.menu"}
{"channel_id": -100, "user_msg_id": 1, "resume": null, "text": "hello", "event": "handle.incoming", "cwd": ".", "engine": "codex", "branch": null, "chat_id": -100, "project": "takopi", "timestamp": "2026-01-15T22:16:57.050329Z", "level": "info", "logger": "takopi.runner_bridge"}
{"ok": true, "error": null, "answer_len": 2, "elapsed_s": 0.0, "action_count": 0, "resume": "resume-123", "event": "runner.completed", "cwd": ".", "engine": "codex", "user_msg_id": 1, "branch": null, "chat_id": -100, "project": "takopi", "timestamp": "2026-01-15T22:16:57.051568Z", "level": "info", "logger": "takopi.runner_bridge"}
{"state_path": "/tmp/pytest-of-root/pytest-86/test_run_main_loop_auto_resume0/telegram_chat_prefs_state.json", "event": "chat_prefs.enabled", "timestamp": "2026-01-15T22:16:57.058441Z", "level": "info", "logger": "takopi.telegram.loop"}
{"scope": "main", "resolved_scope": "main", "state_path": "/tmp/pytest-of-root/pytest-86/test_run_main_loop_auto_resume0/telegram_topics_state.json", "event": "topics.enabled", "timestamp": "2026-01-15T22:16:57.058572Z", "level": "info", "logger": "takopi.telegram.loop"}
{"commands": ["codex", "claude", "proj", "new", "agent", "model", "reasoning", "trigger", "topic", "ctx", "cancel"], "event": "startup.command_menu.updated", "timestamp": "2026-01-15T22:16:57.061436Z", "level": "info", "logger": "takopi.telegram.commands.menu"}
{"channel_id": 123, "user_msg_id": 1, "resume": "resume-claude", "text": "hello", "event": "handle.incoming", "cwd": "/tmp/pytest-of-root/pytest-86/test_run_main_loop_auto_resume0", "engine": "claude", "branch": null, "chat_id": 123, "project": "proj", "timestamp": "2026-01-15T22:16:58.063503Z", "level": "info", "logger": "takopi.runner_bridge"}
{"ok": true, "error": null, "answer_len": 2, "elapsed_s": 0.0, "action_count": 0, "resume": "resume-claude", "event": "runner.completed", "cwd": "/tmp/pytest-of-root/pytest-86/test_run_main_loop_auto_resume0", "engine": "claude", "user_msg_id": 1, "branch": null, "chat_id": 123, "project": "proj", "timestamp": "2026-01-15T22:16:58.066199Z", "level": "info", "logger": "takopi.runner_bridge"}
{"state_path": "/tmp/pytest-of-root/pytest-86/test_run_main_loop_auto_resume1/telegram_chat_prefs_state.json", "event": "chat_prefs.enabled", "timestamp": "2026-01-15T22:16:58.071553Z", "level": "info", "logger": "takopi.telegram.loop"}
{"state_path": "/tmp/pytest-of-root/pytest-86/test_run_main_loop_auto_resume1/telegram_chat_sessions_state.json", "event": "chat_sessions.enabled", "timestamp": "2026-01-15T22:16:58.071672Z", "level": "info", "logger": "takopi.telegram.loop"}
{"commands": ["codex", "proj", "new", "agent", "model", "reasoning", "trigger", "cancel"], "event": "startup.command_menu.updated", "timestamp": "2026-01-15T22:16:58.074486Z", "level": "info", "logger": "takopi.telegram.commands.menu"}
{"channel_id": 123, "user_msg_id": 1, "resume": null, "text": "hello", "event": "handle.incoming", "cwd": "/tmp/pytest-of-root/pytest-86/test_run_main_loop_auto_resume1", "engine": "codex", "branch": null, "chat_id": 123, "project": "proj", "timestamp": "2026-01-15T22:16:59.076700Z", "level": "info", "logger": "takopi.runner_bridge"}
{"ok": true, "error": null, "answer_len": 2, "elapsed_s": 0.0, "action_count": 0, "resume": "resume-123", "event": "runner.completed", "cwd": "/tmp/pytest-of-root/pytest-86/test_run_main_loop_auto_resume1", "engine": "codex", "user_msg_id": 1, "branch": null, "chat_id": 123, "project": "proj", "timestamp": "2026-01-15T22:16:59.078702Z", "level": "info", "logger": "takopi.runner_bridge"}
{"state_path": "/tmp/pytest-of-root/pytest-86/test_run_main_loop_auto_resume1/telegram_chat_prefs_state.json", "event": "chat_prefs.enabled", "timestamp": "2026-01-15T22:16:59.086153Z", "level": "info", "logger": "takopi.telegram.loop"}
{"state_path": "/tmp/pytest-of-root/pytest-86/test_run_main_loop_auto_resume1/telegram_chat_sessions_state.json", "event": "chat_sessions.enabled", "timestamp": "2026-01-15T22:16:59.086343Z", "level": "info", "logger": "takopi.telegram.loop"}
{"commands": ["codex", "new", "agent", "model", "reasoning", "trigger", "cancel"], "event": "startup.command_menu.updated", "timestamp": "2026-01-15T22:16:59.091960Z", "level": "info", "logger": "takopi.telegram.commands.menu"}
{"channel_id": 123, "user_msg_id": 2, "resume": "resume-123", "text": "followup", "event": "handle.incoming", "engine": "codex", "chat_id": 123, "timestamp": "2026-01-15T22:17:00.094487Z", "level": "info", "logger": "takopi.runner_bridge"}
{"ok": true, "error": null, "answer_len": 2, "elapsed_s": 0.0, "action_count": 0, "resume": "resume-123", "event": "runner.completed", "engine": "codex", "user_msg_id": 2, "chat_id": 123, "timestamp": "2026-01-15T22:17:00.096495Z", "level": "info", "logger": "takopi.runner_bridge"}
{"commands": ["codex", "proj", "other", "new", "agent", "model", "reasoning", "trigger", "file", "cancel"], "event": "startup.command_menu.updated", "timestamp": "2026-01-15T22:17:00.111220Z", "level": "info", "logger": "takopi.telegram.commands.menu"}
{"channel_id": 123, "user_msg_id": 1, "resume": null, "text": "do thing\n\n[uploaded file: incoming/hello.txt]", "event": "handle.incoming", "cwd": "/tmp/pytest-of-root/pytest-86/test_run_main_loop_prompt_uplo0/other", "engine": "codex", "branch": null, "chat_id": 123, "project": "other", "timestamp": "2026-01-15T22:17:00.112548Z", "level": "info", "logger": "takopi.runner_bridge"}
{"ok": true, "error": null, "answer_len": 2, "elapsed_s": 0.0, "action_count": 0, "resume": "894329562b0a4fad95c24ddcc099e085", "event": "runner.completed", "cwd": "/tmp/pytest-of-root/pytest-86/test_run_main_loop_prompt_uplo0/other", "engine": "codex", "user_msg_id": 1, "branch": null, "chat_id": 123, "project": "other", "timestamp": "2026-01-15T22:17:00.113926Z", "level": "info", "logger": "takopi.runner_bridge"}
{"commands": ["claude", "codex", "new", "agent", "model", "reasoning", "trigger", "cancel"], "event": "startup.command_menu.updated", "timestamp": "2026-01-15T22:17:00.121881Z", "level": "info", "logger": "takopi.telegram.commands.menu"}
{"channel_id": 123, "user_msg_id": 1, "resume": null, "text": "(voice transcribed) do thing", "event": "handle.incoming", "engine": "codex", "chat_id": 123, "timestamp": "2026-01-15T22:17:01.123820Z", "level": "info", "logger": "takopi.runner_bridge"}
{"ok": true, "error": null, "answer_len": 5, "elapsed_s": 0.0, "action_count": 0, "resume": "05c29eef962a4565a2831c0b0aea67df", "event": "runner.completed", "engine": "codex", "user_msg_id": 1, "chat_id": 123, "timestamp": "2026-01-15T22:17:01.125469Z", "level": "info", "logger": "takopi.runner_bridge"}
{"commands": ["claude", "codex", "new", "agent", "model", "reasoning", "trigger", "cancel"], "event": "startup.command_menu.updated", "timestamp": "2026-01-15T22:17:01.138861Z", "level": "info", "logger": "takopi.telegram.commands.menu"}
{"channel_id": 123, "user_msg_id": 1, "resume": null, "text": "summarize these\n\na\n\nb\n\nc", "event": "handle.incoming", "engine": "codex", "chat_id": 123, "timestamp": "2026-01-15T22:17:01.640778Z", "level": "info", "logger": "takopi.runner_bridge"}
{"ok": true, "error": null, "answer_len": 5, "elapsed_s": 0.0, "action_count": 0, "resume": "a9bf59c0eb714c9d8bb8f132351e2def", "event": "runner.completed", "engine": "codex", "user_msg_id": 1, "chat_id": 123, "timestamp": "2026-01-15T22:17:01.642323Z", "level": "info", "logger": "takopi.runner_bridge"}
{"commands": ["codex", "new", "agent", "model", "reasoning", "trigger", "cancel"], "event": "startup.command_menu.updated", "timestamp": "2026-01-15T22:17:02.649614Z", "level": "info", "logger": "takopi.telegram.commands.menu"}
{"state_path": "/tmp/pytest-of-root/pytest-86/test_run_main_loop_prompt_uplo1/telegram_chat_prefs_state.json", "event": "chat_prefs.enabled", "timestamp": "2026-01-15T22:17:02.654866Z", "level": "info", "logger": "takopi.telegram.loop"}
{"state_path": "/tmp/pytest-of-root/pytest-86/test_run_main_loop_prompt_uplo1/telegram_chat_sessions_state.json", "event": "chat_sessions.enabled", "timestamp": "2026-01-15T22:17:02.654984Z", "level": "info", "logger": "takopi.telegram.loop"}
{"commands": ["codex", "proj", "new", "agent", "model", "reasoning", "trigger", "file", "cancel"], "event": "startup.command_menu.updated", "timestamp": "2026-01-15T22:17:02.657962Z", "level": "info", "logger": "takopi.telegram.commands.menu"}
{"channel_id": 123, "user_msg_id": 1, "resume": null, "text": "hello\n\n[uploaded file: incoming/hello.txt]", "event": "handle.incoming", "cwd": "/tmp/pytest-of-root/pytest-86/test_run_main_loop_prompt_uplo1/proj", "engine": "codex", "branch": null, "chat_id": 123, "project": "proj", "timestamp": "2026-01-15T22:17:02.658860Z", "level": "info", "logger": "takopi.runner_bridge"}
{"ok": true, "error": null, "answer_len": 2, "elapsed_s": 0.0, "action_count": 0, "resume": "resume-123", "event": "runner.completed", "cwd": "/tmp/pytest-of-root/pytest-86/test_run_main_loop_prompt_uplo1/proj", "engine": "codex", "user_msg_id": 1, "branch": null, "chat_id": 123, "project": "proj", "timestamp": "2026-01-15T22:17:02.659876Z", "level": "info", "logger": "takopi.runner_bridge"}
{"state_path": "/tmp/pytest-of-root/pytest-86/test_run_main_loop_prompt_uplo1/telegram_chat_prefs_state.json", "event": "chat_prefs.enabled", "timestamp": "2026-01-15T22:17:02.663108Z", "level": "info", "logger": "takopi.telegram.loop"}
{"state_path": "/tmp/pytest-of-root/pytest-86/test_run_main_loop_prompt_uplo1/telegram_chat_sessions_state.json", "event": "chat_sessions.enabled", "timestamp": "2026-01-15T22:17:02.663213Z", "level": "info", "logger": "takopi.telegram.loop"}
{"commands": ["codex", "proj", "new", "agent", "model", "reasoning", "trigger", "file", "cancel"], "event": "startup.command_menu.updated", "timestamp": "2026-01-15T22:17:02.666034Z", "level": "info", "logger": "takopi.telegram.commands.menu"}
{"channel_id": 123, "user_msg_id": 2, "resume": "resume-123", "text": "followup\n\n[uploaded file: incoming/hello2.txt]", "event": "handle.incoming", "cwd": "/tmp/pytest-of-root/pytest-86/test_run_main_loop_prompt_uplo1/proj", "engine": "codex", "branch": null, "chat_id": 123, "project": "proj", "timestamp": "2026-01-15T22:17:02.666924Z", "level": "info", "logger": "takopi.runner_bridge"}
{"ok": true, "error": null, "answer_len": 2, "elapsed_s": 0.0, "action_count": 0, "resume": "resume-123", "event": "runner.completed", "cwd": "/tmp/pytest-of-root/pytest-86/test_run_main_loop_prompt_uplo1/proj", "engine": "codex", "user_msg_id": 2, "branch": null, "chat_id": 123, "project": "proj", "timestamp": "2026-01-15T22:17:02.667960Z", "level": "info", "logger": "takopi.runner_bridge"}
{"state_path": "/tmp/pytest-of-root/pytest-86/test_run_main_loop_command_upd0/telegram_chat_prefs_state.json", "event": "chat_prefs.enabled", "timestamp": "2026-01-15T22:17:02.670225Z", "level": "info", "logger": "takopi.telegram.loop"}
{"state_path": "/tmp/pytest-of-root/pytest-86/test_run_main_loop_command_upd0/telegram_chat_sessions_state.json", "event": "chat_sessions.enabled", "timestamp": "2026-01-15T22:17:02.670332Z", "level": "info", "logger": "takopi.telegram.loop"}
{"commands": ["codex", "run_cmd", "new", "agent", "model", "reasoning", "trigger", "cancel"], "event": "startup.command_menu.updated", "timestamp": "2026-01-15T22:17:02.670487Z", "level": "info", "logger": "takopi.telegram.commands.menu"}
{"channel_id": 123, "user_msg_id": 1, "resume": null, "text": "hello", "event": "handle.incoming", "engine": "codex", "chat_id": 123, "timestamp": "2026-01-15T22:17:02.670866Z", "level": "info", "logger": "takopi.runner_bridge"}
{"ok": true, "error": null, "answer_len": 2, "elapsed_s": 0.0, "action_count": 0, "resume": "resume-123", "event": "runner.completed", "engine": "codex", "user_msg_id": 1, "chat_id": 123, "timestamp": "2026-01-15T22:17:02.671759Z", "level": "info", "logger": "takopi.runner_bridge"}
{"state_path": "/tmp/pytest-of-root/pytest-86/test_run_main_loop_command_upd0/telegram_chat_prefs_state.json", "event": "chat_prefs.enabled", "timestamp": "2026-01-15T22:17:02.672167Z", "level": "info", "logger": "takopi.telegram.loop"}
{"state_path": "/tmp/pytest-of-root/pytest-86/test_run_main_loop_command_upd0/telegram_chat_sessions_state.json", "event": "chat_sessions.enabled", "timestamp": "2026-01-15T22:17:02.672259Z", "level": "info", "logger": "takopi.telegram.loop"}
{"commands": ["codex", "run_cmd", "new", "agent", "model", "reasoning", "trigger", "cancel"], "event": "startup.command_menu.updated", "timestamp": "2026-01-15T22:17:02.672379Z", "level": "info", "logger": "takopi.telegram.commands.menu"}
{"channel_id": 123, "user_msg_id": 2, "resume": "resume-123", "text": "followup", "event": "handle.incoming", "engine": "codex", "chat_id": 123, "timestamp": "2026-01-15T22:17:03.674415Z", "level": "info", "logger": "takopi.runner_bridge"}
{"ok": true, "error": null, "answer_len": 2, "elapsed_s": 0.0, "action_count": 0, "resume": "resume-123", "event": "runner.completed", "engine": "codex", "user_msg_id": 2, "chat_id": 123, "timestamp": "2026-01-15T22:17:03.675734Z", "level": "info", "logger": "takopi.runner_bridge"}
{"state_path": "/tmp/pytest-of-root/pytest-86/test_run_main_loop_hides_resum0/telegram_chat_prefs_state.json", "event": "chat_prefs.enabled", "timestamp": "2026-01-15T22:17:03.681177Z", "level": "info", "logger": "takopi.telegram.loop"}
{"state_path": "/tmp/pytest-of-root/pytest-86/test_run_main_loop_hides_resum0/telegram_chat_sessions_state.json", "event": "chat_sessions.enabled", "timestamp": "2026-01-15T22:17:03.681285Z", "level": "info", "logger": "takopi.telegram.loop"}
{"commands": ["codex", "proj", "new", "agent", "model", "reasoning", "trigger", "cancel"], "event": "startup.command_menu.updated", "timestamp": "2026-01-15T22:17:03.684477Z", "level": "info", "logger": "takopi.telegram.commands.menu"}
{"channel_id": 123, "user_msg_id": 1, "resume": null, "text": "hello", "event": "handle.incoming", "cwd": "/tmp/pytest-of-root/pytest-86/test_run_main_loop_hides_resum0", "engine": "codex", "branch": null, "chat_id": 123, "project": "proj", "timestamp": "2026-01-15T22:17:04.686626Z", "level": "info", "logger": "takopi.runner_bridge"}
{"ok": true, "error": null, "answer_len": 2, "elapsed_s": 0.0, "action_count": 0, "resume": "resume-123", "event": "runner.completed", "cwd": "/tmp/pytest-of-root/pytest-86/test_run_main_loop_hides_resum0", "engine": "codex", "user_msg_id": 1, "branch": null, "chat_id": 123, "project": "proj", "timestamp": "2026-01-15T22:17:04.688675Z", "level": "info", "logger": "takopi.runner_bridge"}
{"state_path": "/tmp/pytest-of-root/pytest-86/test_run_main_loop_chat_sessio0/telegram_chat_prefs_state.json", "event": "chat_prefs.enabled", "timestamp": "2026-01-15T22:17:04.698440Z", "level": "info", "logger": "takopi.telegram.loop"}
{"state_path": "/tmp/pytest-of-root/pytest-86/test_run_main_loop_chat_sessio0/telegram_chat_sessions_state.json", "event": "chat_sessions.enabled", "timestamp": "2026-01-15T22:17:04.698649Z", "level": "info", "logger": "takopi.telegram.loop"}
{"commands": ["codex", "new", "agent", "model", "reasoning", "trigger", "cancel"], "event": "startup.command_menu.updated", "timestamp": "2026-01-15T22:17:04.704395Z", "level": "info", "logger": "takopi.telegram.commands.menu"}
{"channel_id": -100, "user_msg_id": 1, "resume": null, "text": "hello", "event": "handle.incoming", "engine": "codex", "chat_id": -100, "timestamp": "2026-01-15T22:17:05.706457Z", "level": "info", "logger": "takopi.runner_bridge"}
{"ok": true, "error": null, "answer_len": 2, "elapsed_s": 0.0, "action_count": 0, "resume": "resume-group", "event": "runner.completed", "engine": "codex", "user_msg_id": 1, "chat_id": -100, "timestamp": "2026-01-15T22:17:05.707658Z", "level": "info", "logger": "takopi.runner_bridge"}
{"state_path": "/tmp/pytest-of-root/pytest-86/test_run_main_loop_chat_sessio0/telegram_chat_prefs_state.json", "event": "chat_prefs.enabled", "timestamp": "2026-01-15T22:17:05.711138Z", "level": "info", "logger": "takopi.telegram.loop"}
{"state_path": "/tmp/pytest-of-root/pytest-86/test_run_main_loop_chat_sessio0/telegram_chat_sessions_state.json", "event": "chat_sessions.enabled", "timestamp": "2026-01-15T22:17:05.711243Z", "level": "info", "logger": "takopi.telegram.loop"}
{"commands": ["codex", "new", "agent", "model", "reasoning", "trigger", "cancel"], "event": "startup.command_menu.updated", "timestamp": "2026-01-15T22:17:05.714150Z", "level": "info", "logger": "takopi.telegram.commands.menu"}
{"channel_id": -100, "user_msg_id": 2, "resume": null, "text": "followup", "event": "handle.incoming", "engine": "codex", "chat_id": -100, "timestamp": "2026-01-15T22:17:06.716116Z", "level": "info", "logger": "takopi.runner_bridge"}
{"ok": true, "error": null, "answer_len": 2, "elapsed_s": 0.0, "action_count": 0, "resume": "b586ea36924342e1ba019658f62d66ac", "event": "runner.completed", "engine": "codex", "user_msg_id": 2, "chat_id": -100, "timestamp": "2026-01-15T22:17:06.717579Z", "level": "info", "logger": "takopi.runner_bridge"}
{"state_path": "/tmp/pytest-of-root/pytest-86/test_run_main_loop_new_clears_0/telegram_chat_prefs_state.json", "event": "chat_prefs.enabled", "timestamp": "2026-01-15T22:17:06.724182Z", "level": "info", "logger": "takopi.telegram.loop"}
{"state_path": "/tmp/pytest-of-root/pytest-86/test_run_main_loop_new_clears_0/telegram_chat_sessions_state.json", "event": "chat_sessions.enabled", "timestamp": "2026-01-15T22:17:06.724300Z", "level": "info", "logger": "takopi.telegram.loop"}
{"commands": ["codex", "new", "agent", "model", "reasoning", "trigger", "cancel"], "event": "startup.command_menu.updated", "timestamp": "2026-01-15T22:17:06.727205Z", "level": "info", "logger": "takopi.telegram.commands.menu"}
{"state_path": "/tmp/pytest-of-root/pytest-86/test_run_main_loop_new_clears_1/telegram_chat_prefs_state.json", "event": "chat_prefs.enabled", "timestamp": "2026-01-15T22:17:06.736187Z", "level": "info", "logger": "takopi.telegram.loop"}
{"scope": "main", "resolved_scope": "main", "state_path": "/tmp/pytest-of-root/pytest-86/test_run_main_loop_new_clears_1/telegram_topics_state.json", "event": "topics.enabled", "timestamp": "2026-01-15T22:17:06.736317Z", "level": "info", "logger": "takopi.telegram.loop"}
{"commands": ["codex", "new", "agent", "model", "reasoning", "trigger", "topic", "ctx", "cancel"], "event": "startup.command_menu.updated", "timestamp": "2026-01-15T22:17:06.739265Z", "level": "info", "logger": "takopi.telegram.commands.menu"}
{"commands": ["codex", "new", "agent", "model", "reasoning", "trigger", "cancel"], "event": "startup.command_menu.updated", "timestamp": "2026-01-15T22:17:06.751661Z", "level": "info", "logger": "takopi.telegram.commands.menu"}
{"channel_id": 123, "user_msg_id": 1, "resume": null, "text": "hello", "event": "handle.incoming", "engine": "codex", "chat_id": 123, "timestamp": "2026-01-15T22:17:07.753434Z", "level": "info", "logger": "takopi.runner_bridge"}
{"ok": true, "error": null, "answer_len": 2, "elapsed_s": 0.0, "action_count": 0, "resume": "5cf975fcdf464e1e8737265b35cfcad8", "event": "runner.completed", "engine": "codex", "user_msg_id": 1, "chat_id": 123, "timestamp": "2026-01-15T22:17:07.754973Z", "level": "info", "logger": "takopi.runner_bridge"}
{"commands": ["codex", "proj", "new", "agent", "model", "reasoning", "trigger", "file", "cancel"], "event": "startup.command_menu.updated", "timestamp": "2026-01-15T22:17:07.769247Z", "level": "info", "logger": "takopi.telegram.commands.menu"}
{"commands": ["codex", "echo_cmd", "new", "agent", "model", "reasoning", "trigger", "cancel"], "event": "startup.command_menu.updated", "timestamp": "2026-01-15T22:17:08.817061Z", "level": "info", "logger": "takopi.telegram.commands.menu"}
{"commands": ["codex", "pi", "proj", "use_project", "new", "agent", "model", "reasoning", "trigger", "cancel"], "event": "startup.command_menu.updated", "timestamp": "2026-01-15T22:17:08.818730Z", "level": "info", "logger": "takopi.telegram.commands.menu"}
{"channel_id": 123, "user_msg_id": 1, "resume": null, "text": "hello", "event": "handle.incoming", "cwd": ".", "engine": "pi", "branch": null, "chat_id": 123, "project": "proj", "timestamp": "2026-01-15T22:17:08.819055Z", "level": "info", "logger": "takopi.runner_bridge"}
{"ok": true, "error": null, "answer_len": 2, "elapsed_s": 0.0, "action_count": 0, "resume": "653dcf4d72c64e4abfacccea77fe5f00", "event": "runner.completed", "cwd": ".", "engine": "pi", "user_msg_id": 1, "branch": null, "chat_id": 123, "project": "proj", "timestamp": "2026-01-15T22:17:08.819816Z", "level": "info", "logger": "takopi.runner_bridge"}
{"commands": ["codex", "pi", "proj", "auto_ctx", "new", "agent", "model", "reasoning", "trigger", "cancel"], "event": "startup.command_menu.updated", "timestamp": "2026-01-15T22:17:08.821287Z", "level": "info", "logger": "takopi.telegram.commands.menu"}
{"channel_id": -42, "user_msg_id": 1, "resume": null, "text": "hello", "event": "handle.incoming", "cwd": ".", "engine": "pi", "branch": null, "chat_id": -42, "project": "proj", "timestamp": "2026-01-15T22:17:08.821577Z", "level": "info", "logger": "takopi.runner_bridge"}
{"ok": true, "error": null, "answer_len": 2, "elapsed_s": 0.0, "action_count": 0, "resume": "459b09ae49cb40d6825cedf4a34adb3d", "event": "runner.completed", "cwd": ".", "engine": "pi", "user_msg_id": 1, "branch": null, "chat_id": -42, "project": "proj", "timestamp": "2026-01-15T22:17:08.822256Z", "level": "info", "logger": "takopi.runner_bridge"}
{"commands": ["codex", "late_cmd", "new", "agent", "model", "reasoning", "trigger", "cancel"], "event": "startup.command_menu.updated", "timestamp": "2026-01-15T22:17:08.823708Z", "level": "info", "logger": "takopi.telegram.commands.menu"}
{"state_path": "/tmp/pytest-of-root/pytest-86/test_run_main_loop_mentions_on0/telegram_chat_prefs_state.json", "event": "chat_prefs.enabled", "timestamp": "2026-01-15T22:17:08.829029Z", "level": "info", "logger": "takopi.telegram.loop"}
{"commands": ["codex", "new", "agent", "model", "reasoning", "trigger", "file", "cancel"], "event": "startup.command_menu.updated", "timestamp": "2026-01-15T22:17:08.832029Z", "level": "info", "logger": "takopi.telegram.commands.menu"}
{"method": "sendMessage", "status": 429, "url": "https://api.telegram.org/bot[REDACTED]/sendMessage", "retry_after": 3.0, "event": "telegram.rate_limited", "timestamp": "2026-01-15T22:17:08.845228Z", "level": "warning", "logger": "takopi.telegram.client_api"}
{"method": "getUpdates", "payload": {"timeout": 1}, "event": "telegram.request", "timestamp": "2026-01-15T22:17:08.846881Z", "level": "debug", "logger": "takopi.telegram.client_api"}
{"method": "getUpdates", "status": 500, "url": "https://api.telegram.org/bot[REDACTED]/getUpdates", "error": "Server error '500 Internal Server Error' for url 'https://api.telegram.org/bot[REDACTED]/getUpdates'\nFor more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/500", "body": "oops", "event": "telegram.http_error", "timestamp": "2026-01-15T22:17:08.847392Z", "level": "error", "logger": "takopi.telegram.client_api"}
{"method": "sendDocument", "payload": {"chat_id": 1}, "event": "telegram.request", "timestamp": "2026-01-15T22:17:08.848718Z", "level": "debug", "logger": "takopi.telegram.client_api"}
{"method": "sendDocument", "status": 429, "url": "https://api.telegram.org/bot[REDACTED]/sendDocument", "retry_after": 2.0, "event": "telegram.rate_limited", "timestamp": "2026-01-15T22:17:08.851802Z", "level": "warning", "logger": "takopi.telegram.client_api"}
{"method": "sendMessage", "payload": {"chat_id": 1, "text": "hi"}, "event": "telegram.request", "timestamp": "2026-01-15T22:17:08.853218Z", "level": "debug", "logger": "takopi.telegram.client_api"}
{"method": "sendMessage", "status": 429, "url": "https://api.telegram.org/bot[REDACTED]/sendMessage", "retry_after": 5.0, "event": "telegram.rate_limited", "timestamp": "2026-01-15T22:17:08.853608Z", "level": "warning", "logger": "takopi.telegram.client_api"}
{"method": "getUpdates", "payload": {"timeout": 1}, "event": "telegram.request", "timestamp": "2026-01-15T22:17:08.854819Z", "level": "debug", "logger": "takopi.telegram.client_api"}
{"method": "getUpdates", "url": "https://api.telegram.org/bot[REDACTED]/getUpdates", "payload": {"ok": false, "error_code": 400, "description": "bad"}, "event": "telegram.api_error", "timestamp": "2026-01-15T22:17:08.855178Z", "level": "error", "logger": "takopi.telegram.client_api"}
{"method": "getUpdates", "payload": {"timeout": 1}, "event": "telegram.request", "timestamp": "2026-01-15T22:17:08.856420Z", "level": "debug", "logger": "takopi.telegram.client_api"}
{"method": "getUpdates", "url": "https://api.telegram.org/bot[REDACTED]/getUpdates", "payload": ["not", "a", "dict"], "event": "telegram.invalid_payload", "timestamp": "2026-01-15T22:17:08.856771Z", "level": "error", "logger": "takopi.telegram.client_api"}
{"method": "getMe", "payload": {}, "event": "telegram.request", "timestamp": "2026-01-15T22:17:08.858188Z", "level": "debug", "logger": "takopi.telegram.client_api"}
{"method": "getMe", "payload": {"ok": true, "result": {"username": "bot-only"}}, "event": "telegram.response", "timestamp": "2026-01-15T22:17:08.858558Z", "level": "debug", "logger": "takopi.telegram.client_api"}
{"method": "getMe", "error": "Object missing required field `id`", "error_type": "ValidationError", "event": "telegram.decode_error", "timestamp": "2026-01-15T22:17:08.858812Z", "level": "error", "logger": "takopi.telegram.client_api"}
{"method": "download_file", "status": 429, "url": "https://api.telegram.org/file/bot[REDACTED]/path/to/file", "retry_after": 3.0, "event": "telegram.rate_limited", "timestamp": "2026-01-15T22:17:08.860438Z", "level": "warning", "logger": "takopi.telegram.client_api"}
{"method": "download_file", "status": 429, "url": "https://api.telegram.org/file/bot[REDACTED]/path", "retry_after": 5.0, "event": "telegram.rate_limited", "timestamp": "2026-01-15T22:17:08.862123Z", "level": "warning", "logger": "takopi.telegram.client_api"}
{"path": "/tmp/pytest-of-root/pytest-88/test_watch_config_applies_runt0/takopi.toml", "event": "config.reload.applied", "timestamp": "2026-01-15T22:22:24.412994Z", "level": "info", "logger": "takopi.config_watch"}
{"channel_id": 123, "user_msg_id": 10, "resume": null, "text": "hi", "event": "handle.incoming", "timestamp": "2026-01-15T22:22:24.438865Z", "level": "info", "logger": "takopi.runner_bridge"}
{"ok": true, "error": null, "answer_len": 2, "elapsed_s": 0.0, "action_count": 0, "resume": "7c3d5789541a4f158225a64fd3a9337a", "event": "runner.completed", "timestamp": "2026-01-15T22:22:24.439527Z", "level": "info", "logger": "takopi.runner_bridge"}
{"channel_id": 123, "user_msg_id": 10, "resume": "sid", "text": "do this\n`codex resume sid`\nand that", "event": "handle.incoming", "timestamp": "2026-01-15T22:22:24.440806Z", "level": "info", "logger": "takopi.runner_bridge"}
{"ok": true, "error": null, "answer_len": 2, "elapsed_s": 0.0, "action_count": 0, "resume": "sid", "event": "runner.completed", "timestamp": "2026-01-15T22:22:24.441289Z", "level": "info", "logger": "takopi.runner_bridge"}
{"channel_id": 123, "user_msg_id": 10, "resume": null, "text": "hi", "event": "handle.incoming", "timestamp": "2026-01-15T22:22:24.442321Z", "level": "info", "logger": "takopi.runner_bridge"}
{"ok": true, "error": null, "answer_len": 10000, "elapsed_s": 0.0, "action_count": 0, "resume": "e18e85300e094b0dbfab7fe93d51145d", "event": "runner.completed", "timestamp": "2026-01-15T22:22:24.442806Z", "level": "info", "logger": "takopi.runner_bridge"}
{"channel_id": 123, "user_msg_id": 10, "resume": null, "text": "hi", "event": "handle.incoming", "timestamp": "2026-01-15T22:22:24.443926Z", "level": "info", "logger": "takopi.runner_bridge"}
{"ok": true, "error": null, "answer_len": 2, "elapsed_s": 1.0, "action_count": 2, "resume": "87c0bd9f042e456bad7841baabda98d9", "event": "runner.completed", "timestamp": "2026-01-15T22:22:24.444642Z", "level": "info", "logger": "takopi.runner_bridge"}
{"channel_id": 123, "user_msg_id": 42, "resume": null, "text": "do it", "event": "handle.incoming", "timestamp": "2026-01-15T22:22:24.445757Z", "level": "info", "logger": "takopi.runner_bridge"}
{"ok": true, "error": null, "answer_len": 4, "elapsed_s": 2.1, "action_count": 1, "resume": "123e4567-e89b-12d3-a456-426614174000", "event": "runner.completed", "timestamp": "2026-01-15T22:22:24.446286Z", "level": "info", "logger": "takopi.runner_bridge"}
{"channel_id": 123, "user_msg_id": 42, "resume": null, "text": "do it", "event": "handle.incoming", "timestamp": "2026-01-15T22:22:24.447280Z", "level": "info", "logger": "takopi.runner_bridge"}
{"ok": true, "error": null, "answer_len": 4, "elapsed_s": 0.0, "action_count": 0, "resume": "123e4567-e89b-12d3-a456-426614174000", "event": "runner.completed", "timestamp": "2026-01-15T22:22:24.447756Z", "level": "info", "logger": "takopi.runner_bridge"}
{"channel_id": 123, "user_msg_id": 10, "resume": null, "text": "do something", "event": "handle.incoming", "timestamp": "2026-01-15T22:22:24.448821Z", "level": "info", "logger": "takopi.runner_bridge"}
{"resume": "019b66fc-64c2-7a71-81cd-081c504cfeb2", "elapsed_s": 0.0004128470318391919, "event": "handle.cancelled", "timestamp": "2026-01-15T22:22:24.449321Z", "level": "info", "logger": "takopi.runner_bridge"}
{"channel_id": 123, "user_msg_id": 10, "resume": null, "text": "do something", "event": "handle.incoming", "timestamp": "2026-01-15T22:22:24.450324Z", "level": "info", "logger": "takopi.runner_bridge"}
{"error": "unhandled errors in a TaskGroup (1 sub-exception)", "error_type": "ExceptionGroup", "exc_info": true, "event": "handle.runner_failed", "timestamp": "2026-01-15T22:22:24.450734Z", "level": "error", "logger": "takopi.runner_bridge"}
{"engine": "codex", "resume": null, "prompt": "hello", "prompt_len": 5, "event": "runner.start", "timestamp": "2026-01-15T22:22:24.686795Z", "level": "info", "logger": "takopi.runners.codex"}
{"cmd": "/tmp/pytest-of-root/pytest-88/test_run_serializes_new_sessio1/codex", "args": ["exec", "--json", "--skip-git-repo-check", "--color=never", "-"], "pid": 434693, "event": "subprocess.spawn", "timestamp": "2026-01-15T22:22:24.687922Z", "level": "info", "logger": "takopi.runners.codex"}
{"pid": 434693, "resume": null, "bytes": 5, "event": "subprocess.stdin.send", "timestamp": "2026-01-15T22:22:24.688077Z", "level": "info", "logger": "takopi.runners.codex"}
{"pid": 434693, "rc": 0, "event": "subprocess.exit", "timestamp": "2026-01-15T22:22:24.722795Z", "level": "info", "logger": "takopi.runners.codex"}
{"resume": "019b73c4-0c3f-7701-a0bb-aac6b4d8a3bc", "event": "codex.session.completed", "timestamp": "2026-01-15T22:22:24.722910Z", "level": "info", "logger": "takopi.runners.codex"}
{"engine": "codex", "resume": "019b73c4-0c3f-7701-a0bb-aac6b4d8a3bc", "prompt": "resume", "prompt_len": 6, "event": "runner.start", "timestamp": "2026-01-15T22:22:24.723059Z", "level": "info", "logger": "takopi.runners.codex"}
{"cmd": "/tmp/pytest-of-root/pytest-88/test_run_serializes_new_sessio1/codex", "args": ["exec", "--json", "--skip-git-repo-check", "--color=never", "resume", "019b73c4-0c3f-7701-a0bb-aac6b4d8a3bc", "-"], "pid": 434695, "event": "subprocess.spawn", "timestamp": "2026-01-15T22:22:24.724039Z", "level": "info", "logger": "takopi.runners.codex"}
{"pid": 434695, "resume": "019b73c4-0c3f-7701-a0bb-aac6b4d8a3bc", "bytes": 6, "event": "subprocess.stdin.send", "timestamp": "2026-01-15T22:22:24.724222Z", "level": "info", "logger": "takopi.runners.codex"}
{"pid": 434695, "rc": 0, "event": "subprocess.exit", "timestamp": "2026-01-15T22:22:24.747122Z", "level": "info", "logger": "takopi.runners.codex"}
{"resume": "019b73c4-0c3f-7701-a0bb-aac6b4d8a3bc", "event": "codex.session.completed", "timestamp": "2026-01-15T22:22:24.747210Z", "level": "info", "logger": "takopi.runners.codex"}
{"engine": "codex", "resume": null, "prompt": "hi", "prompt_len": 2, "event": "runner.start", "timestamp": "2026-01-15T22:22:24.749328Z", "level": "info", "logger": "takopi.runners.codex"}
{"cmd": "/tmp/pytest-of-root/pytest-88/test_codex_runner_preserves_wa0/codex", "args": ["exec", "--json", "--skip-git-repo-check", "--color=never", "-"], "pid": 434697, "event": "subprocess.spawn", "timestamp": "2026-01-15T22:22:24.750385Z", "level": "info", "logger": "takopi.runners.codex"}
{"pid": 434697, "resume": null, "bytes": 2, "event": "subprocess.stdin.send", "timestamp": "2026-01-15T22:22:24.750552Z", "level": "info", "logger": "takopi.runners.codex"}
{"pid": 434697, "rc": 0, "event": "subprocess.exit", "timestamp": "2026-01-15T22:22:24.772962Z", "level": "info", "logger": "takopi.runners.codex"}
{"resume": "019b73c4-0c3f-7701-a0bb-aac6b4d8a3bc", "event": "codex.session.completed", "timestamp": "2026-01-15T22:22:24.773081Z", "level": "info", "logger": "takopi.runners.codex"}
{"engine": "codex", "resume": null, "prompt": "hi", "prompt_len": 2, "event": "runner.start", "timestamp": "2026-01-15T22:22:24.775193Z", "level": "info", "logger": "takopi.runners.codex"}
{"cmd": "/tmp/pytest-of-root/pytest-88/test_codex_runner_reconnect_no0/codex", "args": ["exec", "--json", "--skip-git-repo-check", "--color=never", "-"], "pid": 434699, "event": "subprocess.spawn", "timestamp": "2026-01-15T22:22:24.776111Z", "level": "info", "logger": "takopi.runners.codex"}
{"pid": 434699, "resume": null, "bytes": 2, "event": "subprocess.stdin.send", "timestamp": "2026-01-15T22:22:24.776292Z", "level": "info", "logger": "takopi.runners.codex"}
{"pid": 434699, "rc": 0, "event": "subprocess.exit", "timestamp": "2026-01-15T22:22:24.794733Z", "level": "info", "logger": "takopi.runners.codex"}
{"resume": "019b73c4-0c3f-7701-a0bb-aac6b4d8a3bc", "event": "codex.session.completed", "timestamp": "2026-01-15T22:22:24.794829Z", "level": "info", "logger": "takopi.runners.codex"}
{"engine": "codex", "resume": null, "prompt": "hi", "prompt_len": 2, "event": "runner.start", "timestamp": "2026-01-15T22:22:24.796717Z", "level": "info", "logger": "takopi.runners.codex"}
{"cmd": "/tmp/pytest-of-root/pytest-88/test_codex_runner_reconnect_no1/codex", "args": ["exec", "--json", "--skip-git-repo-check", "--color=never", "-"], "pid": 434701, "event": "subprocess.spawn", "timestamp": "2026-01-15T22:22:24.797518Z", "level": "info", "logger": "takopi.runners.codex"}
{"pid": 434701, "resume": null, "bytes": 2, "event": "subprocess.stdin.send", "timestamp": "2026-01-15T22:22:24.797688Z", "level": "info", "logger": "takopi.runners.codex"}
{"pid": 434701, "rc": 0, "event": "subprocess.exit", "timestamp": "2026-01-15T22:22:24.816119Z", "level": "info", "logger": "takopi.runners.codex"}
{"engine": "codex", "resume": null, "prompt": "hi", "prompt_len": 2, "event": "runner.start", "timestamp": "2026-01-15T22:22:24.818372Z", "level": "info", "logger": "takopi.runners.codex"}
{"cmd": "/tmp/pytest-of-root/pytest-88/test_codex_runner_includes_std0/codex", "args": ["exec", "--json", "--skip-git-repo-check", "--color=never", "-"], "pid": 434703, "event": "subprocess.spawn", "timestamp": "2026-01-15T22:22:24.819296Z", "level": "info", "logger": "takopi.runners.codex"}
{"pid": 434703, "resume": null, "bytes": 2, "event": "subprocess.stdin.send", "timestamp": "2026-01-15T22:22:24.819529Z", "level": "info", "logger": "takopi.runners.codex"}
{"pid": 434703, "rc": 1, "event": "subprocess.exit", "timestamp": "2026-01-15T22:22:24.830483Z", "level": "info", "logger": "takopi.runners.codex"}
{"engine": "codex", "resume": null, "prompt": "one", "prompt_len": 3, "event": "runner.start", "timestamp": "2026-01-15T22:22:24.832793Z", "level": "info", "logger": "takopi.runners.codex"}
{"engine": "codex", "resume": null, "prompt": "two", "prompt_len": 3, "event": "runner.start", "timestamp": "2026-01-15T22:22:24.832928Z", "level": "info", "logger": "takopi.runners.codex"}
{"cmd": "/tmp/pytest-of-root/pytest-88/test_run_serializes_two_new_se0/codex", "args": ["exec", "--json", "--skip-git-repo-check", "--color=never", "-"], "pid": 434705, "event": "subprocess.spawn", "timestamp": "2026-01-15T22:22:24.834736Z", "level": "info", "logger": "takopi.runners.codex"}
{"cmd": "/tmp/pytest-of-root/pytest-88/test_run_serializes_two_new_se0/codex", "args": ["exec", "--json", "--skip-git-repo-check", "--color=never", "-"], "pid": 434707, "event": "subprocess.spawn", "timestamp": "2026-01-15T22:22:24.834923Z", "level": "info", "logger": "takopi.runners.codex"}
{"pid": 434705, "resume": null, "bytes": 3, "event": "subprocess.stdin.send", "timestamp": "2026-01-15T22:22:24.835106Z", "level": "info", "logger": "takopi.runners.codex"}
{"pid": 434707, "resume": null, "bytes": 3, "event": "subprocess.stdin.send", "timestamp": "2026-01-15T22:22:24.835219Z", "level": "info", "logger": "takopi.runners.codex"}
{"pid": 434705, "rc": 0, "event": "subprocess.exit", "timestamp": "2026-01-15T22:22:24.855207Z", "level": "info", "logger": "takopi.runners.codex"}
{"resume": "019b73c4-0c3f-7701-a0bb-aac6b4d8a3bc", "event": "codex.session.completed", "timestamp": "2026-01-15T22:22:24.855507Z", "level": "info", "logger": "takopi.runners.codex"}
{"pid": 434707, "rc": 0, "event": "subprocess.exit", "timestamp": "2026-01-15T22:22:24.864544Z", "level": "info", "logger": "takopi.runners.codex"}
{"resume": "019b73c4-0c3f-7701-a0bb-aac6b4d8a3bc", "event": "codex.session.completed", "timestamp": "2026-01-15T22:22:24.864722Z", "level": "info", "logger": "takopi.runners.codex"}
{"engine": "dummy-jsonl", "resume": null, "prompt": "hello", "prompt_len": 5, "event": "runner.start", "timestamp": "2026-01-15T22:22:25.020916Z", "level": "info", "logger": "takopi.runner"}
{"cmd": "dummy", "args": [], "pid": 123, "event": "subprocess.spawn", "timestamp": "2026-01-15T22:22:25.021032Z", "level": "info", "logger": "takopi.runner"}
{"pid": 123, "rc": 0, "event": "subprocess.exit", "timestamp": "2026-01-15T22:22:25.021223Z", "level": "info", "logger": "takopi.runner"}
{"engine": "dummy-jsonl", "resume": null, "prompt": "hello", "prompt_len": 5, "event": "runner.start", "timestamp": "2026-01-15T22:22:25.022198Z", "level": "info", "logger": "takopi.runner"}
{"cmd": "dummy", "args": [], "pid": 456, "event": "subprocess.spawn", "timestamp": "2026-01-15T22:22:25.022281Z", "level": "info", "logger": "takopi.runner"}
{"pid": 456, "jsonl_seq": 2, "line": "invalid", "event": "runner.jsonl.invalid", "timestamp": "2026-01-15T22:22:25.022418Z", "level": "info", "logger": "takopi.runner"}
{"pid": 456, "rc": 0, "event": "subprocess.exit", "timestamp": "2026-01-15T22:22:25.022614Z", "level": "info", "logger": "takopi.runner"}
{"migration": "legacy-telegram", "path": "/tmp/pytest-of-root/pytest-88/test_legacy_keys_migrated0/takopi.toml", "event": "config.migrated", "timestamp": "2026-01-15T22:22:25.048390Z", "level": "info", "logger": "takopi.config_migrations"}
{"count": 158, "limit": 100, "event": "startup.command_menu.too_many", "timestamp": "2026-01-15T22:22:25.093252Z", "level": "warning", "logger": "takopi.telegram.commands.menu"}
{"chat_id": 123, "progress_message_id": 42, "event": "cancel.requested", "timestamp": "2026-01-15T22:22:25.107844Z", "level": "info", "logger": "takopi.telegram.commands.cancel"}
{"chat_id": 123, "progress_message_id": 1, "event": "cancel.requested", "timestamp": "2026-01-15T22:22:25.108819Z", "level": "info", "logger": "takopi.telegram.commands.cancel"}
{"chat_id": 123, "progress_message_id": 55, "resume": "sid", "event": "cancel.queued", "timestamp": "2026-01-15T22:22:25.109849Z", "level": "info", "logger": "takopi.telegram.commands.cancel"}
{"chat_id": 123, "progress_message_id": 42, "event": "cancel.requested", "timestamp": "2026-01-15T22:22:25.115229Z", "level": "info", "logger": "takopi.telegram.commands.cancel"}
{"chat_id": 123, "progress_message_id": 77, "resume": "sid", "event": "cancel.queued", "timestamp": "2026-01-15T22:22:25.116432Z", "level": "info", "logger": "takopi.telegram.commands.cancel"}
{"channel_id": 123, "user_msg_id": 1, "resume": null, "text": "hello", "event": "handle.incoming", "chat_id": 123, "engine": "codex", "timestamp": "2026-01-15T22:22:25.141153Z", "level": "info", "logger": "takopi.runner_bridge"}
{"ok": true, "error": null, "answer_len": 2, "elapsed_s": 0.0, "action_count": 0, "resume": "resume-123", "event": "runner.completed", "chat_id": 123, "user_msg_id": 1, "engine": "codex", "timestamp": "2026-01-15T22:22:25.141754Z", "level": "info", "logger": "takopi.runner_bridge"}
{"commands": ["codex", "new", "agent", "model", "reasoning", "trigger", "cancel"], "event": "startup.command_menu.updated", "timestamp": "2026-01-15T22:22:25.147673Z", "level": "info", "logger": "takopi.telegram.commands.menu"}
{"channel_id": 123, "user_msg_id": 1, "resume": null, "text": "first", "event": "handle.incoming", "chat_id": 123, "engine": "codex", "timestamp": "2026-01-15T22:22:26.149460Z", "level": "info", "logger": "takopi.runner_bridge"}
{"channel_id": 123, "user_msg_id": 2, "resume": "abc123", "text": "followup", "event": "handle.incoming", "chat_id": 123, "engine": "codex", "timestamp": "2026-01-15T22:22:26.201482Z", "level": "info", "logger": "takopi.runner_bridge"}
{"state_path": "/tmp/pytest-of-root/pytest-88/test_run_main_loop_persists_to0/telegram_chat_prefs_state.json", "event": "chat_prefs.enabled", "timestamp": "2026-01-15T22:22:26.208104Z", "level": "info", "logger": "takopi.telegram.loop"}
{"scope": "projects", "resolved_scope": "projects", "state_path": "/tmp/pytest-of-root/pytest-88/test_run_main_loop_persists_to0/telegram_topics_state.json", "event": "topics.enabled", "timestamp": "2026-01-15T22:22:26.208256Z", "level": "info", "logger": "takopi.telegram.loop"}
{"commands": ["codex", "takopi", "new", "agent", "model", "reasoning", "trigger", "topic", "ctx", "cancel"], "event": "startup.command_menu.updated", "timestamp": "2026-01-15T22:22:26.211408Z", "level": "info", "logger": "takopi.telegram.commands.menu"}
{"channel_id": -100, "user_msg_id": 1, "resume": null, "text": "hello", "event": "handle.incoming", "chat_id": -100, "branch": null, "cwd": ".", "engine": "codex", "project": "takopi", "timestamp": "2026-01-15T22:22:27.213756Z", "level": "info", "logger": "takopi.runner_bridge"}
{"ok": true, "error": null, "answer_len": 2, "elapsed_s": 0.0, "action_count": 0, "resume": "resume-123", "event": "runner.completed", "chat_id": -100, "branch": null, "cwd": ".", "user_msg_id": 1, "engine": "codex", "project": "takopi", "timestamp": "2026-01-15T22:22:27.215888Z", "level": "info", "logger": "takopi.runner_bridge"}
{"state_path": "/tmp/pytest-of-root/pytest-88/test_run_main_loop_auto_resume0/telegram_chat_prefs_state.json", "event": "chat_prefs.enabled", "timestamp": "2026-01-15T22:22:27.229177Z", "level": "info", "logger": "takopi.telegram.loop"}
{"scope": "main", "resolved_scope": "main", "state_path": "/tmp/pytest-of-root/pytest-88/test_run_main_loop_auto_resume0/telegram_topics_state.json", "event": "topics.enabled", "timestamp": "2026-01-15T22:22:27.229452Z", "level": "info", "logger": "takopi.telegram.loop"}
{"commands": ["codex", "claude", "proj", "new", "agent", "model", "reasoning", "trigger", "topic", "ctx", "cancel"], "event": "startup.command_menu.updated", "timestamp": "2026-01-15T22:22:27.237891Z", "level": "info", "logger": "takopi.telegram.commands.menu"}
{"channel_id": 123, "user_msg_id": 1, "resume": "resume-claude", "text": "hello", "event": "handle.incoming", "chat_id": 123, "branch": null, "cwd": "/tmp/pytest-of-root/pytest-88/test_run_main_loop_auto_resume0", "engine": "claude", "project": "proj", "timestamp": "2026-01-15T22:22:28.240589Z", "level": "info", "logger": "takopi.runner_bridge"}
{"ok": true, "error": null, "answer_len": 2, "elapsed_s": 0.0, "action_count": 0, "resume": "resume-claude", "event": "runner.completed", "chat_id": 123, "branch": null, "cwd": "/tmp/pytest-of-root/pytest-88/test_run_main_loop_auto_resume0", "user_msg_id": 1, "engine": "claude", "project": "proj", "timestamp": "2026-01-15T22:22:28.241997Z", "level": "info", "logger": "takopi.runner_bridge"}
{"state_path": "/tmp/pytest-of-root/pytest-88/test_run_main_loop_auto_resume1/telegram_chat_prefs_state.json", "event": "chat_prefs.enabled", "timestamp": "2026-01-15T22:22:28.247465Z", "level": "info", "logger": "takopi.telegram.loop"}
{"state_path": "/tmp/pytest-of-root/pytest-88/test_run_main_loop_auto_resume1/telegram_chat_sessions_state.json", "event": "chat_sessions.enabled", "timestamp": "2026-01-15T22:22:28.247579Z", "level": "info", "logger": "takopi.telegram.loop"}
{"commands": ["codex", "proj", "new", "agent", "model", "reasoning", "trigger", "cancel"], "event": "startup.command_menu.updated", "timestamp": "2026-01-15T22:22:28.250459Z", "level": "info", "logger": "takopi.telegram.commands.menu"}
{"channel_id": 123, "user_msg_id": 1, "resume": null, "text": "hello", "event": "handle.incoming", "chat_id": 123, "branch": null, "cwd": "/tmp/pytest-of-root/pytest-88/test_run_main_loop_auto_resume1", "engine": "codex", "project": "proj", "timestamp": "2026-01-15T22:22:29.252291Z", "level": "info", "logger": "takopi.runner_bridge"}
{"ok": true, "error": null, "answer_len": 2, "elapsed_s": 0.0, "action_count": 0, "resume": "resume-123", "event": "runner.completed", "chat_id": 123, "branch": null, "cwd": "/tmp/pytest-of-root/pytest-88/test_run_main_loop_auto_resume1", "user_msg_id": 1, "engine": "codex", "project": "proj", "timestamp": "2026-01-15T22:22:29.253577Z", "level": "info", "logger": "takopi.runner_bridge"}
{"state_path": "/tmp/pytest-of-root/pytest-88/test_run_main_loop_auto_resume1/telegram_chat_prefs_state.json", "event": "chat_prefs.enabled", "timestamp": "2026-01-15T22:22:29.257641Z", "level": "info", "logger": "takopi.telegram.loop"}
{"state_path": "/tmp/pytest-of-root/pytest-88/test_run_main_loop_auto_resume1/telegram_chat_sessions_state.json", "event": "chat_sessions.enabled", "timestamp": "2026-01-15T22:22:29.257782Z", "level": "info", "logger": "takopi.telegram.loop"}
{"commands": ["codex", "new", "agent", "model", "reasoning", "trigger", "cancel"], "event": "startup.command_menu.updated", "timestamp": "2026-01-15T22:22:29.261087Z", "level": "info", "logger": "takopi.telegram.commands.menu"}
{"channel_id": 123, "user_msg_id": 2, "resume": "resume-123", "text": "followup", "event": "handle.incoming", "chat_id": 123, "engine": "codex", "timestamp": "2026-01-15T22:22:30.263490Z", "level": "info", "logger": "takopi.runner_bridge"}
{"ok": true, "error": null, "answer_len": 2, "elapsed_s": 0.0, "action_count": 0, "resume": "resume-123", "event": "runner.completed", "chat_id": 123, "user_msg_id": 2, "engine": "codex", "timestamp": "2026-01-15T22:22:30.265435Z", "level": "info", "logger": "takopi.runner_bridge"}
{"commands": ["codex", "proj", "other", "new", "agent", "model", "reasoning", "trigger", "file", "cancel"], "event": "startup.command_menu.updated", "timestamp": "2026-01-15T22:22:30.279449Z", "level": "info", "logger": "takopi.telegram.commands.menu"}
{"channel_id": 123, "user_msg_id": 1, "resume": null, "text": "do thing\n\n[uploaded file: incoming/hello.txt]", "event": "handle.incoming", "chat_id": 123, "branch": null, "cwd": "/tmp/pytest-of-root/pytest-88/test_run_main_loop_prompt_uplo0/other", "engine": "codex", "project": "other", "timestamp": "2026-01-15T22:22:30.280668Z", "level": "info", "logger": "takopi.runner_bridge"}
{"ok": true, "error": null, "answer_len": 2, "elapsed_s": 0.0, "action_count": 0, "resume": "fc076b55d77c42e1825923de172df4af", "event": "runner.completed", "chat_id": 123, "branch": null, "cwd": "/tmp/pytest-of-root/pytest-88/test_run_main_loop_prompt_uplo0/other", "user_msg_id": 1, "engine": "codex", "project": "other", "timestamp": "2026-01-15T22:22:30.281956Z", "level": "info", "logger": "takopi.runner_bridge"}
{"commands": ["claude", "codex", "new", "agent", "model", "reasoning", "trigger", "cancel"], "event": "startup.command_menu.updated", "timestamp": "2026-01-15T22:22:30.289189Z", "level": "info", "logger": "takopi.telegram.commands.menu"}
{"channel_id": 123, "user_msg_id": 1, "resume": null, "text": "(voice transcribed) do thing", "event": "handle.incoming", "chat_id": 123, "engine": "codex", "timestamp": "2026-01-15T22:22:31.291085Z", "level": "info", "logger": "takopi.runner_bridge"}
{"ok": true, "error": null, "answer_len": 5, "elapsed_s": 0.0, "action_count": 0, "resume": "d15fcadd5a904231a62d49d0dfe26b3b", "event": "runner.completed", "chat_id": 123, "user_msg_id": 1, "engine": "codex", "timestamp": "2026-01-15T22:22:31.292861Z", "level": "info", "logger": "takopi.runner_bridge"}
{"commands": ["claude", "codex", "new", "agent", "model", "reasoning", "trigger", "cancel"], "event": "startup.command_menu.updated", "timestamp": "2026-01-15T22:22:31.307307Z", "level": "info", "logger": "takopi.telegram.commands.menu"}
{"channel_id": 123, "user_msg_id": 1, "resume": null, "text": "summarize these\n\na\n\nb\n\nc", "event": "handle.incoming", "chat_id": 123, "engine": "codex", "timestamp": "2026-01-15T22:22:31.809558Z", "level": "info", "logger": "takopi.runner_bridge"}
{"ok": true, "error": null, "answer_len": 5, "elapsed_s": 0.0, "action_count": 0, "resume": "c75962092a754d87a47b3d666878a1b6", "event": "runner.completed", "chat_id": 123, "user_msg_id": 1, "engine": "codex", "timestamp": "2026-01-15T22:22:31.811039Z", "level": "info", "logger": "takopi.runner_bridge"}
{"commands": ["codex", "new", "agent", "model", "reasoning", "trigger", "cancel"], "event": "startup.command_menu.updated", "timestamp": "2026-01-15T22:22:32.819301Z", "level": "info", "logger": "takopi.telegram.commands.menu"}
{"state_path": "/tmp/pytest-of-root/pytest-88/test_run_main_loop_prompt_uplo1/telegram_chat_prefs_state.json", "event": "chat_prefs.enabled", "timestamp": "2026-01-15T22:22:32.827159Z", "level": "info", "logger": "takopi.telegram.loop"}
{"state_path": "/tmp/pytest-of-root/pytest-88/test_run_main_loop_prompt_uplo1/telegram_chat_sessions_state.json", "event": "chat_sessions.enabled", "timestamp": "2026-01-15T22:22:32.827316Z", "level": "info", "logger": "takopi.telegram.loop"}
{"commands": ["codex", "proj", "new", "agent", "model", "reasoning", "trigger", "file", "cancel"], "event": "startup.command_menu.updated", "timestamp": "2026-01-15T22:22:32.831682Z", "level": "info", "logger": "takopi.telegram.commands.menu"}
{"channel_id": 123, "user_msg_id": 1, "resume": null, "text": "hello\n\n[uploaded file: incoming/hello.txt]", "event": "handle.incoming", "chat_id": 123, "branch": null, "cwd": "/tmp/pytest-of-root/pytest-88/test_run_main_loop_prompt_uplo1/proj", "engine": "codex", "project": "proj", "timestamp": "2026-01-15T22:22:32.832861Z", "level": "info", "logger": "takopi.runner_bridge"}
{"ok": true, "error": null, "answer_len": 2, "elapsed_s": 0.0, "action_count": 0, "resume": "resume-123", "event": "runner.completed", "chat_id": 123, "branch": null, "cwd": "/tmp/pytest-of-root/pytest-88/test_run_main_loop_prompt_uplo1/proj", "user_msg_id": 1, "engine": "codex", "project": "proj", "timestamp": "2026-01-15T22:22:32.834115Z", "level": "info", "logger": "takopi.runner_bridge"}
{"state_path": "/tmp/pytest-of-root/pytest-88/test_run_main_loop_prompt_uplo1/telegram_chat_prefs_state.json", "event": "chat_prefs.enabled", "timestamp": "2026-01-15T22:22:32.838559Z", "level": "info", "logger": "takopi.telegram.loop"}
{"state_path": "/tmp/pytest-of-root/pytest-88/test_run_main_loop_prompt_uplo1/telegram_chat_sessions_state.json", "event": "chat_sessions.enabled", "timestamp": "2026-01-15T22:22:32.838682Z", "level": "info", "logger": "takopi.telegram.loop"}
{"commands": ["codex", "proj", "new", "agent", "model", "reasoning", "trigger", "file", "cancel"], "event": "startup.command_menu.updated", "timestamp": "2026-01-15T22:22:32.842658Z", "level": "info", "logger": "takopi.telegram.commands.menu"}
{"channel_id": 123, "user_msg_id": 2, "resume": "resume-123", "text": "followup\n\n[uploaded file: incoming/hello2.txt]", "event": "handle.incoming", "chat_id": 123, "branch": null, "cwd": "/tmp/pytest-of-root/pytest-88/test_run_main_loop_prompt_uplo1/proj", "engine": "codex", "project": "proj", "timestamp": "2026-01-15T22:22:32.843792Z", "level": "info", "logger": "takopi.runner_bridge"}
{"ok": true, "error": null, "answer_len": 2, "elapsed_s": 0.0, "action_count": 0, "resume": "resume-123", "event": "runner.completed", "chat_id": 123, "branch": null, "cwd": "/tmp/pytest-of-root/pytest-88/test_run_main_loop_prompt_uplo1/proj", "user_msg_id": 2, "engine": "codex", "project": "proj", "timestamp": "2026-01-15T22:22:32.845059Z", "level": "info", "logger": "takopi.runner_bridge"}
{"state_path": "/tmp/pytest-of-root/pytest-88/test_run_main_loop_command_upd0/telegram_chat_prefs_state.json", "event": "chat_prefs.enabled", "timestamp": "2026-01-15T22:22:32.847846Z", "level": "info", "logger": "takopi.telegram.loop"}
{"state_path": "/tmp/pytest-of-root/pytest-88/test_run_main_loop_command_upd0/telegram_chat_sessions_state.json", "event": "chat_sessions.enabled", "timestamp": "2026-01-15T22:22:32.847978Z", "level": "info", "logger": "takopi.telegram.loop"}
{"commands": ["codex", "run_cmd", "new", "agent", "model", "reasoning", "trigger", "cancel"], "event": "startup.command_menu.updated", "timestamp": "2026-01-15T22:22:32.848147Z", "level": "info", "logger": "takopi.telegram.commands.menu"}
{"channel_id": 123, "user_msg_id": 1, "resume": null, "text": "hello", "event": "handle.incoming", "chat_id": 123, "engine": "codex", "timestamp": "2026-01-15T22:22:32.848626Z", "level": "info", "logger": "takopi.runner_bridge"}
{"ok": true, "error": null, "answer_len": 2, "elapsed_s": 0.0, "action_count": 0, "resume": "resume-123", "event": "runner.completed", "chat_id": 123, "user_msg_id": 1, "engine": "codex", "timestamp": "2026-01-15T22:22:32.849775Z", "level": "info", "logger": "takopi.runner_bridge"}
{"state_path": "/tmp/pytest-of-root/pytest-88/test_run_main_loop_command_upd0/telegram_chat_prefs_state.json", "event": "chat_prefs.enabled", "timestamp": "2026-01-15T22:22:32.850270Z", "level": "info", "logger": "takopi.telegram.loop"}
{"state_path": "/tmp/pytest-of-root/pytest-88/test_run_main_loop_command_upd0/telegram_chat_sessions_state.json", "event": "chat_sessions.enabled", "timestamp": "2026-01-15T22:22:32.850429Z", "level": "info", "logger": "takopi.telegram.loop"}
{"commands": ["codex", "run_cmd", "new", "agent", "model", "reasoning", "trigger", "cancel"], "event": "startup.command_menu.updated", "timestamp": "2026-01-15T22:22:32.850553Z", "level": "info", "logger": "takopi.telegram.commands.menu"}
{"channel_id": 123, "user_msg_id": 2, "resume": "resume-123", "text": "followup", "event": "handle.incoming", "chat_id": 123, "engine": "codex", "timestamp": "2026-01-15T22:22:33.852550Z", "level": "info", "logger": "takopi.runner_bridge"}
{"ok": true, "error": null, "answer_len": 2, "elapsed_s": 0.0, "action_count": 0, "resume": "resume-123", "event": "runner.completed", "chat_id": 123, "user_msg_id": 2, "engine": "codex", "timestamp": "2026-01-15T22:22:33.853923Z", "level": "info", "logger": "takopi.runner_bridge"}
{"state_path": "/tmp/pytest-of-root/pytest-88/test_run_main_loop_hides_resum0/telegram_chat_prefs_state.json", "event": "chat_prefs.enabled", "timestamp": "2026-01-15T22:22:33.859686Z", "level": "info", "logger": "takopi.telegram.loop"}
{"state_path": "/tmp/pytest-of-root/pytest-88/test_run_main_loop_hides_resum0/telegram_chat_sessions_state.json", "event": "chat_sessions.enabled", "timestamp": "2026-01-15T22:22:33.859825Z", "level": "info", "logger": "takopi.telegram.loop"}
{"commands": ["codex", "proj", "new", "agent", "model", "reasoning", "trigger", "cancel"], "event": "startup.command_menu.updated", "timestamp": "2026-01-15T22:22:33.862923Z", "level": "info", "logger": "takopi.telegram.commands.menu"}
{"channel_id": 123, "user_msg_id": 1, "resume": null, "text": "hello", "event": "handle.incoming", "chat_id": 123, "branch": null, "cwd": "/tmp/pytest-of-root/pytest-88/test_run_main_loop_hides_resum0", "engine": "codex", "project": "proj", "timestamp": "2026-01-15T22:22:34.865285Z", "level": "info", "logger": "takopi.runner_bridge"}
{"ok": true, "error": null, "answer_len": 2, "elapsed_s": 0.0, "action_count": 0, "resume": "resume-123", "event": "runner.completed", "chat_id": 123, "branch": null, "cwd": "/tmp/pytest-of-root/pytest-88/test_run_main_loop_hides_resum0", "user_msg_id": 1, "engine": "codex", "project": "proj", "timestamp": "2026-01-15T22:22:34.868006Z", "level": "info", "logger": "takopi.runner_bridge"}
{"state_path": "/tmp/pytest-of-root/pytest-88/test_run_main_loop_chat_sessio0/telegram_chat_prefs_state.json", "event": "chat_prefs.enabled", "timestamp": "2026-01-15T22:22:34.882467Z", "level": "info", "logger": "takopi.telegram.loop"}
{"state_path": "/tmp/pytest-of-root/pytest-88/test_run_main_loop_chat_sessio0/telegram_chat_sessions_state.json", "event": "chat_sessions.enabled", "timestamp": "2026-01-15T22:22:34.882755Z", "level": "info", "logger": "takopi.telegram.loop"}
{"commands": ["codex", "new", "agent", "model", "reasoning", "trigger", "cancel"], "event": "startup.command_menu.updated", "timestamp": "2026-01-15T22:22:34.888378Z", "level": "info", "logger": "takopi.telegram.commands.menu"}
{"channel_id": -100, "user_msg_id": 1, "resume": null, "text": "hello", "event": "handle.incoming", "chat_id": -100, "engine": "codex", "timestamp": "2026-01-15T22:22:35.890534Z", "level": "info", "logger": "takopi.runner_bridge"}
{"ok": true, "error": null, "answer_len": 2, "elapsed_s": 0.0, "action_count": 0, "resume": "resume-group", "event": "runner.completed", "chat_id": -100, "user_msg_id": 1, "engine": "codex", "timestamp": "2026-01-15T22:22:35.892069Z", "level": "info", "logger": "takopi.runner_bridge"}
{"state_path": "/tmp/pytest-of-root/pytest-88/test_run_main_loop_chat_sessio0/telegram_chat_prefs_state.json", "event": "chat_prefs.enabled", "timestamp": "2026-01-15T22:22:35.896668Z", "level": "info", "logger": "takopi.telegram.loop"}
{"state_path": "/tmp/pytest-of-root/pytest-88/test_run_main_loop_chat_sessio0/telegram_chat_sessions_state.json", "event": "chat_sessions.enabled", "timestamp": "2026-01-15T22:22:35.896796Z", "level": "info", "logger": "takopi.telegram.loop"}
{"commands": ["codex", "new", "agent", "model", "reasoning", "trigger", "cancel"], "event": "startup.command_menu.updated", "timestamp": "2026-01-15T22:22:35.899603Z", "level": "info", "logger": "takopi.telegram.commands.menu"}
{"channel_id": -100, "user_msg_id": 2, "resume": null, "text": "followup", "event": "handle.incoming", "chat_id": -100, "engine": "codex", "timestamp": "2026-01-15T22:22:36.901804Z", "level": "info", "logger": "takopi.runner_bridge"}
{"ok": true, "error": null, "answer_len": 2, "elapsed_s": 0.0, "action_count": 0, "resume": "d3ff0e1350ea4d50941ad7969bd68bf6", "event": "runner.completed", "chat_id": -100, "user_msg_id": 2, "engine": "codex", "timestamp": "2026-01-15T22:22:36.903868Z", "level": "info", "logger": "takopi.runner_bridge"}
{"state_path": "/tmp/pytest-of-root/pytest-88/test_run_main_loop_new_clears_0/telegram_chat_prefs_state.json", "event": "chat_prefs.enabled", "timestamp": "2026-01-15T22:22:36.914126Z", "level": "info", "logger": "takopi.telegram.loop"}
{"state_path": "/tmp/pytest-of-root/pytest-88/test_run_main_loop_new_clears_0/telegram_chat_sessions_state.json", "event": "chat_sessions.enabled", "timestamp": "2026-01-15T22:22:36.914329Z", "level": "info", "logger": "takopi.telegram.loop"}
{"commands": ["codex", "new", "agent", "model", "reasoning", "trigger", "cancel"], "event": "startup.command_menu.updated", "timestamp": "2026-01-15T22:22:36.919657Z", "level": "info", "logger": "takopi.telegram.commands.menu"}
{"state_path": "/tmp/pytest-of-root/pytest-88/test_run_main_loop_new_clears_1/telegram_chat_prefs_state.json", "event": "chat_prefs.enabled", "timestamp": "2026-01-15T22:22:36.931020Z", "level": "info", "logger": "takopi.telegram.loop"}
{"scope": "main", "resolved_scope": "main", "state_path": "/tmp/pytest-of-root/pytest-88/test_run_main_loop_new_clears_1/telegram_topics_state.json", "event": "topics.enabled", "timestamp": "2026-01-15T22:22:36.931228Z", "level": "info", "logger": "takopi.telegram.loop"}
{"commands": ["codex", "new", "agent", "model", "reasoning", "trigger", "topic", "ctx", "cancel"], "event": "startup.command_menu.updated", "timestamp": "2026-01-15T22:22:36.936605Z", "level": "info", "logger": "takopi.telegram.commands.menu"}
{"commands": ["codex", "new", "agent", "model", "reasoning", "trigger", "cancel"], "event": "startup.command_menu.updated", "timestamp": "2026-01-15T22:22:36.951191Z", "level": "info", "logger": "takopi.telegram.commands.menu"}
{"channel_id": 123, "user_msg_id": 1, "resume": null, "text": "hello", "event": "handle.incoming", "chat_id": 123, "engine": "codex", "timestamp": "2026-01-15T22:22:37.953072Z", "level": "info", "logger": "takopi.runner_bridge"}
{"ok": true, "error": null, "answer_len": 2, "elapsed_s": 0.0, "action_count": 0, "resume": "11aee3933e4c486baaaf19e40ec462c1", "event": "runner.completed", "chat_id": 123, "user_msg_id": 1, "engine": "codex", "timestamp": "2026-01-15T22:22:37.954952Z", "level": "info", "logger": "takopi.runner_bridge"}
{"commands": ["codex", "proj", "new", "agent", "model", "reasoning", "trigger", "file", "cancel"], "event": "startup.command_menu.updated", "timestamp": "2026-01-15T22:22:37.975870Z", "level": "info", "logger": "takopi.telegram.commands.menu"}
{"commands": ["codex", "echo_cmd", "new", "agent", "model", "reasoning", "trigger", "cancel"], "event": "startup.command_menu.updated", "timestamp": "2026-01-15T22:22:39.021414Z", "level": "info", "logger": "takopi.telegram.commands.menu"}
{"commands": ["codex", "pi", "proj", "use_project", "new", "agent", "model", "reasoning", "trigger", "cancel"], "event": "startup.command_menu.updated", "timestamp": "2026-01-15T22:22:39.024641Z", "level": "info", "logger": "takopi.telegram.commands.menu"}
{"channel_id": 123, "user_msg_id": 1, "resume": null, "text": "hello", "event": "handle.incoming", "chat_id": 123, "branch": null, "cwd": ".", "engine": "pi", "project": "proj", "timestamp": "2026-01-15T22:22:39.025211Z", "level": "info", "logger": "takopi.runner_bridge"}
{"ok": true, "error": null, "answer_len": 2, "elapsed_s": 0.0, "action_count": 0, "resume": "153c903462db4635bc0b8b10ca3d533a", "event": "runner.completed", "chat_id": 123, "branch": null, "cwd": ".", "user_msg_id": 1, "engine": "pi", "project": "proj", "timestamp": "2026-01-15T22:22:39.026663Z", "level": "info", "logger": "takopi.runner_bridge"}
{"commands": ["codex", "pi", "proj", "auto_ctx", "new", "agent", "model", "reasoning", "trigger", "cancel"], "event": "startup.command_menu.updated", "timestamp": "2026-01-15T22:22:39.029775Z", "level": "info", "logger": "takopi.telegram.commands.menu"}
{"channel_id": -42, "user_msg_id": 1, "resume": null, "text": "hello", "event": "handle.incoming", "chat_id": -42, "branch": null, "cwd": ".", "engine": "pi", "project": "proj", "timestamp": "2026-01-15T22:22:39.030269Z", "level": "info", "logger": "takopi.runner_bridge"}
{"ok": true, "error": null, "answer_len": 2, "elapsed_s": 0.0, "action_count": 0, "resume": "1c06e793788d4bbdbbecc9c7d79de68f", "event": "runner.completed", "chat_id": -42, "branch": null, "cwd": ".", "user_msg_id": 1, "engine": "pi", "project": "proj", "timestamp": "2026-01-15T22:22:39.031609Z", "level": "info", "logger": "takopi.runner_bridge"}
{"commands": ["codex", "late_cmd", "new", "agent", "model", "reasoning", "trigger", "cancel"], "event": "startup.command_menu.updated", "timestamp": "2026-01-15T22:22:39.034439Z", "level": "info", "logger": "takopi.telegram.commands.menu"}
{"state_path": "/tmp/pytest-of-root/pytest-88/test_run_main_loop_mentions_on0/telegram_chat_prefs_state.json", "event": "chat_prefs.enabled", "timestamp": "2026-01-15T22:22:39.044532Z", "level": "info", "logger": "takopi.telegram.loop"}
{"commands": ["codex", "new", "agent", "model", "reasoning", "trigger", "file", "cancel"], "event": "startup.command_menu.updated", "timestamp": "2026-01-15T22:22:39.050304Z", "level": "info", "logger": "takopi.telegram.commands.menu"}
{"method": "sendMessage", "status": 429, "url": "https://api.telegram.org/bot[REDACTED]/sendMessage", "retry_after": 3.0, "event": "telegram.rate_limited", "timestamp": "2026-01-15T22:22:39.074423Z", "level": "warning", "logger": "takopi.telegram.client_api"}
{"method": "getUpdates", "payload": {"timeout": 1}, "event": "telegram.request", "timestamp": "2026-01-15T22:22:39.077412Z", "level": "debug", "logger": "takopi.telegram.client_api"}
{"method": "getUpdates", "status": 500, "url": "https://api.telegram.org/bot[REDACTED]/getUpdates", "error": "Server error '500 Internal Server Error' for url 'https://api.telegram.org/bot[REDACTED]/getUpdates'\nFor more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/500", "body": "oops", "event": "telegram.http_error", "timestamp": "2026-01-15T22:22:39.078318Z", "level": "error", "logger": "takopi.telegram.client_api"}
{"method": "sendDocument", "payload": {"chat_id": 1}, "event": "telegram.request", "timestamp": "2026-01-15T22:22:39.080947Z", "level": "debug", "logger": "takopi.telegram.client_api"}
{"method": "sendDocument", "status": 429, "url": "https://api.telegram.org/bot[REDACTED]/sendDocument", "retry_after": 2.0, "event": "telegram.rate_limited", "timestamp": "2026-01-15T22:22:39.085180Z", "level": "warning", "logger": "takopi.telegram.client_api"}
{"method": "sendMessage", "payload": {"chat_id": 1, "text": "hi"}, "event": "telegram.request", "timestamp": "2026-01-15T22:22:39.087037Z", "level": "debug", "logger": "takopi.telegram.client_api"}
{"method": "sendMessage", "status": 429, "url": "https://api.telegram.org/bot[REDACTED]/sendMessage", "retry_after": 5.0, "event": "telegram.rate_limited", "timestamp": "2026-01-15T22:22:39.087574Z", "level": "warning", "logger": "takopi.telegram.client_api"}
{"method": "getUpdates", "payload": {"timeout": 1}, "event": "telegram.request", "timestamp": "2026-01-15T22:22:39.089255Z", "level": "debug", "logger": "takopi.telegram.client_api"}
{"method": "getUpdates", "url": "https://api.telegram.org/bot[REDACTED]/getUpdates", "payload": {"ok": false, "error_code": 400, "description": "bad"}, "event": "telegram.api_error", "timestamp": "2026-01-15T22:22:39.089788Z", "level": "error", "logger": "takopi.telegram.client_api"}
{"method": "getUpdates", "payload": {"timeout": 1}, "event": "telegram.request", "timestamp": "2026-01-15T22:22:39.091444Z", "level": "debug", "logger": "takopi.telegram.client_api"}
{"method": "getUpdates", "url": "https://api.telegram.org/bot[REDACTED]/getUpdates", "payload": ["not", "a", "dict"], "event": "telegram.invalid_payload", "timestamp": "2026-01-15T22:22:39.091923Z", "level": "error", "logger": "takopi.telegram.client_api"}
{"method": "getMe", "payload": {}, "event": "telegram.request", "timestamp": "2026-01-15T22:22:39.093939Z", "level": "debug", "logger": "takopi.telegram.client_api"}
{"method": "getMe", "payload": {"ok": true, "result": {"username": "bot-only"}}, "event": "telegram.response", "timestamp": "2026-01-15T22:22:39.094409Z", "level": "debug", "logger": "takopi.telegram.client_api"}
{"method": "getMe", "error": "Object missing required field `id`", "error_type": "ValidationError", "event": "telegram.decode_error", "timestamp": "2026-01-15T22:22:39.094769Z", "level": "error", "logger": "takopi.telegram.client_api"}
{"method": "download_file", "status": 429, "url": "https://api.telegram.org/file/bot[REDACTED]/path/to/file", "retry_after": 3.0, "event": "telegram.rate_limited", "timestamp": "2026-01-15T22:22:39.096948Z", "level": "warning", "logger": "takopi.telegram.client_api"}
{"method": "download_file", "status": 429, "url": "https://api.telegram.org/file/bot[REDACTED]/path", "retry_after": 5.0, "event": "telegram.rate_limited", "timestamp": "2026-01-15T22:22:39.099317Z", "level": "warning", "logger": "takopi.telegram.client_api"}
{"path": "/tmp/pytest-of-root/pytest-92/test_watch_config_applies_runt0/takopi.toml", "event": "config.reload.applied", "timestamp": "2026-01-15T22:33:06.034164Z", "level": "info", "logger": "takopi.config_watch"}
{"channel_id": 123, "user_msg_id": 10, "resume": null, "text": "hi", "event": "handle.incoming", "timestamp": "2026-01-15T22:33:06.059615Z", "level": "info", "logger": "takopi.runner_bridge"}
{"ok": true, "error": null, "answer_len": 2, "elapsed_s": 0.0, "action_count": 0, "resume": "eddb29b55fc44cc499130ddab476f031", "event": "runner.completed", "timestamp": "2026-01-15T22:33:06.060316Z", "level": "info", "logger": "takopi.runner_bridge"}
{"channel_id": 123, "user_msg_id": 10, "resume": "sid", "text": "do this\n`codex resume sid`\nand that", "event": "handle.incoming", "timestamp": "2026-01-15T22:33:06.061406Z", "level": "info", "logger": "takopi.runner_bridge"}
{"ok": true, "error": null, "answer_len": 2, "elapsed_s": 0.0, "action_count": 0, "resume": "sid", "event": "runner.completed", "timestamp": "2026-01-15T22:33:06.061929Z", "level": "info", "logger": "takopi.runner_bridge"}
{"channel_id": 123, "user_msg_id": 10, "resume": null, "text": "hi", "event": "handle.incoming", "timestamp": "2026-01-15T22:33:06.062939Z", "level": "info", "logger": "takopi.runner_bridge"}
{"ok": true, "error": null, "answer_len": 10000, "elapsed_s": 0.0, "action_count": 0, "resume": "7668877ecd8547c79f7c137691c261fc", "event": "runner.completed", "timestamp": "2026-01-15T22:33:06.063412Z", "level": "info", "logger": "takopi.runner_bridge"}
{"channel_id": 123, "user_msg_id": 10, "resume": null, "text": "hi", "event": "handle.incoming", "timestamp": "2026-01-15T22:33:06.064463Z", "level": "info", "logger": "takopi.runner_bridge"}
{"ok": true, "error": null, "answer_len": 2, "elapsed_s": 1.0, "action_count": 2, "resume": "2237b913ff2740f88c695f9dcc47f4d7", "event": "runner.completed", "timestamp": "2026-01-15T22:33:06.065032Z", "level": "info", "logger": "takopi.runner_bridge"}
{"channel_id": 123, "user_msg_id": 42, "resume": null, "text": "do it", "event": "handle.incoming", "timestamp": "2026-01-15T22:33:06.066035Z", "level": "info", "logger": "takopi.runner_bridge"}
{"ok": true, "error": null, "answer_len": 4, "elapsed_s": 2.1, "action_count": 1, "resume": "123e4567-e89b-12d3-a456-426614174000", "event": "runner.completed", "timestamp": "2026-01-15T22:33:06.066605Z", "level": "info", "logger": "takopi.runner_bridge"}
{"channel_id": 123, "user_msg_id": 42, "resume": null, "text": "do it", "event": "handle.incoming", "timestamp": "2026-01-15T22:33:06.067708Z", "level": "info", "logger": "takopi.runner_bridge"}
{"ok": true, "error": null, "answer_len": 4, "elapsed_s": 0.0, "action_count": 0, "resume": "123e4567-e89b-12d3-a456-426614174000", "event": "runner.completed", "timestamp": "2026-01-15T22:33:06.068146Z", "level": "info", "logger": "takopi.runner_bridge"}
{"channel_id": 123, "user_msg_id": 10, "resume": null, "text": "do something", "event": "handle.incoming", "timestamp": "2026-01-15T22:33:06.069166Z", "level": "info", "logger": "takopi.runner_bridge"}
{"resume": "019b66fc-64c2-7a71-81cd-081c504cfeb2", "elapsed_s": 0.0005019339732825756, "event": "handle.cancelled", "timestamp": "2026-01-15T22:33:06.069750Z", "level": "info", "logger": "takopi.runner_bridge"}
{"channel_id": 123, "user_msg_id": 10, "resume": null, "text": "do something", "event": "handle.incoming", "timestamp": "2026-01-15T22:33:06.070745Z", "level": "info", "logger": "takopi.runner_bridge"}
{"error": "unhandled errors in a TaskGroup (1 sub-exception)", "error_type": "ExceptionGroup", "exc_info": true, "event": "handle.runner_failed", "timestamp": "2026-01-15T22:33:06.071124Z", "level": "error", "logger": "takopi.runner_bridge"}
{"engine": "codex", "resume": null, "prompt": "hello", "prompt_len": 5, "event": "runner.start", "timestamp": "2026-01-15T22:33:06.298273Z", "level": "info", "logger": "takopi.runners.codex"}
{"cmd": "/tmp/pytest-of-root/pytest-92/test_run_serializes_new_sessio1/codex", "args": ["exec", "--json", "--skip-git-repo-check", "--color=never", "-"], "pid": 435276, "event": "subprocess.spawn", "timestamp": "2026-01-15T22:33:06.299293Z", "level": "info", "logger": "takopi.runners.codex"}
{"pid": 435276, "resume": null, "bytes": 5, "event": "subprocess.stdin.send", "timestamp": "2026-01-15T22:33:06.299478Z", "level": "info", "logger": "takopi.runners.codex"}
{"pid": 435276, "rc": 0, "event": "subprocess.exit", "timestamp": "2026-01-15T22:33:06.335103Z", "level": "info", "logger": "takopi.runners.codex"}
{"resume": "019b73c4-0c3f-7701-a0bb-aac6b4d8a3bc", "event": "codex.session.completed", "timestamp": "2026-01-15T22:33:06.335207Z", "level": "info", "logger": "takopi.runners.codex"}
{"engine": "codex", "resume": "019b73c4-0c3f-7701-a0bb-aac6b4d8a3bc", "prompt": "resume", "prompt_len": 6, "event": "runner.start", "timestamp": "2026-01-15T22:33:06.335334Z", "level": "info", "logger": "takopi.runners.codex"}
{"cmd": "/tmp/pytest-of-root/pytest-92/test_run_serializes_new_sessio1/codex", "args": ["exec", "--json", "--skip-git-repo-check", "--color=never", "resume", "019b73c4-0c3f-7701-a0bb-aac6b4d8a3bc", "-"], "pid": 435278, "event": "subprocess.spawn", "timestamp": "2026-01-15T22:33:06.336172Z", "level": "info", "logger": "takopi.runners.codex"}
{"pid": 435278, "resume": "019b73c4-0c3f-7701-a0bb-aac6b4d8a3bc", "bytes": 6, "event": "subprocess.stdin.send", "timestamp": "2026-01-15T22:33:06.336322Z", "level": "info", "logger": "takopi.runners.codex"}
{"pid": 435278, "rc": 0, "event": "subprocess.exit", "timestamp": "2026-01-15T22:33:06.363181Z", "level": "info", "logger": "takopi.runners.codex"}
{"resume": "019b73c4-0c3f-7701-a0bb-aac6b4d8a3bc", "event": "codex.session.completed", "timestamp": "2026-01-15T22:33:06.363278Z", "level": "info", "logger": "takopi.runners.codex"}
{"engine": "codex", "resume": null, "prompt": "hi", "prompt_len": 2, "event": "runner.start", "timestamp": "2026-01-15T22:33:06.365313Z", "level": "info", "logger": "takopi.runners.codex"}
{"cmd": "/tmp/pytest-of-root/pytest-92/test_codex_runner_preserves_wa0/codex", "args": ["exec", "--json", "--skip-git-repo-check", "--color=never", "-"], "pid": 435280, "event": "subprocess.spawn", "timestamp": "2026-01-15T22:33:06.366134Z", "level": "info", "logger": "takopi.runners.codex"}
{"pid": 435280, "resume": null, "bytes": 2, "event": "subprocess.stdin.send", "timestamp": "2026-01-15T22:33:06.366307Z", "level": "info", "logger": "takopi.runners.codex"}
{"pid": 435280, "rc": 0, "event": "subprocess.exit", "timestamp": "2026-01-15T22:33:06.394165Z", "level": "info", "logger": "takopi.runners.codex"}
{"resume": "019b73c4-0c3f-7701-a0bb-aac6b4d8a3bc", "event": "codex.session.completed", "timestamp": "2026-01-15T22:33:06.394279Z", "level": "info", "logger": "takopi.runners.codex"}
{"engine": "codex", "resume": null, "prompt": "hi", "prompt_len": 2, "event": "runner.start", "timestamp": "2026-01-15T22:33:06.396329Z", "level": "info", "logger": "takopi.runners.codex"}
{"cmd": "/tmp/pytest-of-root/pytest-92/test_codex_runner_reconnect_no0/codex", "args": ["exec", "--json", "--skip-git-repo-check", "--color=never", "-"], "pid": 435282, "event": "subprocess.spawn", "timestamp": "2026-01-15T22:33:06.397232Z", "level": "info", "logger": "takopi.runners.codex"}
{"pid": 435282, "resume": null, "bytes": 2, "event": "subprocess.stdin.send", "timestamp": "2026-01-15T22:33:06.397471Z", "level": "info", "logger": "takopi.runners.codex"}
{"pid": 435282, "rc": 0, "event": "subprocess.exit", "timestamp": "2026-01-15T22:33:06.423641Z", "level": "info", "logger": "takopi.runners.codex"}
{"resume": "019b73c4-0c3f-7701-a0bb-aac6b4d8a3bc", "event": "codex.session.completed", "timestamp": "2026-01-15T22:33:06.423747Z", "level": "info", "logger": "takopi.runners.codex"}
{"engine": "codex", "resume": null, "prompt": "hi", "prompt_len": 2, "event": "runner.start", "timestamp": "2026-01-15T22:33:06.425524Z", "level": "info", "logger": "takopi.runners.codex"}
{"cmd": "/tmp/pytest-of-root/pytest-92/test_codex_runner_reconnect_no1/codex", "args": ["exec", "--json", "--skip-git-repo-check", "--color=never", "-"], "pid": 435284, "event": "subprocess.spawn", "timestamp": "2026-01-15T22:33:06.426407Z", "level": "info", "logger": "takopi.runners.codex"}
{"pid": 435284, "resume": null, "bytes": 2, "event": "subprocess.stdin.send", "timestamp": "2026-01-15T22:33:06.426547Z", "level": "info", "logger": "takopi.runners.codex"}
{"pid": 435284, "rc": 0, "event": "subprocess.exit", "timestamp": "2026-01-15T22:33:06.468224Z", "level": "info", "logger": "takopi.runners.codex"}
{"engine": "codex", "resume": null, "prompt": "hi", "prompt_len": 2, "event": "runner.start", "timestamp": "2026-01-15T22:33:06.470179Z", "level": "info", "logger": "takopi.runners.codex"}
{"cmd": "/tmp/pytest-of-root/pytest-92/test_codex_runner_includes_std0/codex", "args": ["exec", "--json", "--skip-git-repo-check", "--color=never", "-"], "pid": 435286, "event": "subprocess.spawn", "timestamp": "2026-01-15T22:33:06.471168Z", "level": "info", "logger": "takopi.runners.codex"}
{"pid": 435286, "resume": null, "bytes": 2, "event": "subprocess.stdin.send", "timestamp": "2026-01-15T22:33:06.471366Z", "level": "info", "logger": "takopi.runners.codex"}
{"pid": 435286, "rc": 1, "event": "subprocess.exit", "timestamp": "2026-01-15T22:33:06.497027Z", "level": "info", "logger": "takopi.runners.codex"}
{"engine": "codex", "resume": null, "prompt": "one", "prompt_len": 3, "event": "runner.start", "timestamp": "2026-01-15T22:33:06.498861Z", "level": "info", "logger": "takopi.runners.codex"}
{"engine": "codex", "resume": null, "prompt": "two", "prompt_len": 3, "event": "runner.start", "timestamp": "2026-01-15T22:33:06.498974Z", "level": "info", "logger": "takopi.runners.codex"}
{"cmd": "/tmp/pytest-of-root/pytest-92/test_run_serializes_two_new_se0/codex", "args": ["exec", "--json", "--skip-git-repo-check", "--color=never", "-"], "pid": 435288, "event": "subprocess.spawn", "timestamp": "2026-01-15T22:33:06.500498Z", "level": "info", "logger": "takopi.runners.codex"}
{"cmd": "/tmp/pytest-of-root/pytest-92/test_run_serializes_two_new_se0/codex", "args": ["exec", "--json", "--skip-git-repo-check", "--color=never", "-"], "pid": 435290, "event": "subprocess.spawn", "timestamp": "2026-01-15T22:33:06.500617Z", "level": "info", "logger": "takopi.runners.codex"}
{"pid": 435288, "resume": null, "bytes": 3, "event": "subprocess.stdin.send", "timestamp": "2026-01-15T22:33:06.500767Z", "level": "info", "logger": "takopi.runners.codex"}
{"pid": 435290, "resume": null, "bytes": 3, "event": "subprocess.stdin.send", "timestamp": "2026-01-15T22:33:06.500859Z", "level": "info", "logger": "takopi.runners.codex"}
{"pid": 435290, "rc": 0, "event": "subprocess.exit", "timestamp": "2026-01-15T22:33:06.528072Z", "level": "info", "logger": "takopi.runners.codex"}
{"resume": "019b73c4-0c3f-7701-a0bb-aac6b4d8a3bc", "event": "codex.session.completed", "timestamp": "2026-01-15T22:33:06.528184Z", "level": "info", "logger": "takopi.runners.codex"}
{"pid": 435288, "rc": 0, "event": "subprocess.exit", "timestamp": "2026-01-15T22:33:06.540512Z", "level": "info", "logger": "takopi.runners.codex"}
{"resume": "019b73c4-0c3f-7701-a0bb-aac6b4d8a3bc", "event": "codex.session.completed", "timestamp": "2026-01-15T22:33:06.540593Z", "level": "info", "logger": "takopi.runners.codex"}
{"engine": "dummy-jsonl", "resume": null, "prompt": "hello", "prompt_len": 5, "event": "runner.start", "timestamp": "2026-01-15T22:33:06.697207Z", "level": "info", "logger": "takopi.runner"}
{"cmd": "dummy", "args": [], "pid": 123, "event": "subprocess.spawn", "timestamp": "2026-01-15T22:33:06.697393Z", "level": "info", "logger": "takopi.runner"}
{"pid": 123, "rc": 0, "event": "subprocess.exit", "timestamp": "2026-01-15T22:33:06.697684Z", "level": "info", "logger": "takopi.runner"}
{"engine": "dummy-jsonl", "resume": null, "prompt": "hello", "prompt_len": 5, "event": "runner.start", "timestamp": "2026-01-15T22:33:06.699080Z", "level": "info", "logger": "takopi.runner"}
{"cmd": "dummy", "args": [], "pid": 456, "event": "subprocess.spawn", "timestamp": "2026-01-15T22:33:06.699197Z", "level": "info", "logger": "takopi.runner"}
{"pid": 456, "jsonl_seq": 2, "line": "invalid", "event": "runner.jsonl.invalid", "timestamp": "2026-01-15T22:33:06.699377Z", "level": "info", "logger": "takopi.runner"}
{"pid": 456, "rc": 0, "event": "subprocess.exit", "timestamp": "2026-01-15T22:33:06.699687Z", "level": "info", "logger": "takopi.runner"}
{"migration": "legacy-telegram", "path": "/tmp/pytest-of-root/pytest-92/test_legacy_keys_migrated0/takopi.toml", "event": "config.migrated", "timestamp": "2026-01-15T22:33:06.728980Z", "level": "info", "logger": "takopi.config_migrations"}
{"count": 158, "limit": 100, "event": "startup.command_menu.too_many", "timestamp": "2026-01-15T22:33:06.780862Z", "level": "warning", "logger": "takopi.telegram.commands.menu"}
{"chat_id": 123, "progress_message_id": 42, "event": "cancel.requested", "timestamp": "2026-01-15T22:33:06.798304Z", "level": "info", "logger": "takopi.telegram.commands.cancel"}
{"chat_id": 123, "progress_message_id": 1, "event": "cancel.requested", "timestamp": "2026-01-15T22:33:06.799421Z", "level": "info", "logger": "takopi.telegram.commands.cancel"}
{"chat_id": 123, "progress_message_id": 55, "resume": "sid", "event": "cancel.queued", "timestamp": "2026-01-15T22:33:06.800536Z", "level": "info", "logger": "takopi.telegram.commands.cancel"}
{"chat_id": 123, "progress_message_id": 42, "event": "cancel.requested", "timestamp": "2026-01-15T22:33:06.806414Z", "level": "info", "logger": "takopi.telegram.commands.cancel"}
{"chat_id": 123, "progress_message_id": 77, "resume": "sid", "event": "cancel.queued", "timestamp": "2026-01-15T22:33:06.807465Z", "level": "info", "logger": "takopi.telegram.commands.cancel"}
{"channel_id": 123, "user_msg_id": 1, "resume": null, "text": "hello", "event": "handle.incoming", "chat_id": 123, "engine": "codex", "timestamp": "2026-01-15T22:33:06.834465Z", "level": "info", "logger": "takopi.runner_bridge"}
{"ok": true, "error": null, "answer_len": 2, "elapsed_s": 0.0, "action_count": 0, "resume": "resume-123", "event": "runner.completed", "chat_id": 123, "engine": "codex", "user_msg_id": 1, "timestamp": "2026-01-15T22:33:06.835075Z", "level": "info", "logger": "takopi.runner_bridge"}
{"commands": ["codex", "new", "agent", "model", "reasoning", "trigger", "cancel"], "event": "startup.command_menu.updated", "timestamp": "2026-01-15T22:33:06.841895Z", "level": "info", "logger": "takopi.telegram.commands.menu"}
{"channel_id": 123, "user_msg_id": 1, "resume": null, "text": "first", "event": "handle.incoming", "chat_id": 123, "engine": "codex", "timestamp": "2026-01-15T22:33:07.843499Z", "level": "info", "logger": "takopi.runner_bridge"}
{"channel_id": 123, "user_msg_id": 2, "resume": "abc123", "text": "followup", "event": "handle.incoming", "chat_id": 123, "engine": "codex", "timestamp": "2026-01-15T22:33:07.894971Z", "level": "info", "logger": "takopi.runner_bridge"}
{"state_path": "/tmp/pytest-of-root/pytest-92/test_run_main_loop_persists_to0/telegram_chat_prefs_state.json", "event": "chat_prefs.enabled", "timestamp": "2026-01-15T22:33:07.901536Z", "level": "info", "logger": "takopi.telegram.loop"}
{"scope": "projects", "resolved_scope": "projects", "state_path": "/tmp/pytest-of-root/pytest-92/test_run_main_loop_persists_to0/telegram_topics_state.json", "event": "topics.enabled", "timestamp": "2026-01-15T22:33:07.901714Z", "level": "info", "logger": "takopi.telegram.loop"}
{"commands": ["codex", "takopi", "new", "agent", "model", "reasoning", "trigger", "topic", "ctx", "cancel"], "event": "startup.command_menu.updated", "timestamp": "2026-01-15T22:33:07.904620Z", "level": "info", "logger": "takopi.telegram.commands.menu"}
{"channel_id": -100, "user_msg_id": 1, "resume": null, "text": "hello", "event": "handle.incoming", "branch": null, "chat_id": -100, "engine": "codex", "project": "takopi", "cwd": ".", "timestamp": "2026-01-15T22:33:08.906592Z", "level": "info", "logger": "takopi.runner_bridge"}
{"ok": true, "error": null, "answer_len": 2, "elapsed_s": 0.0, "action_count": 0, "resume": "resume-123", "event": "runner.completed", "branch": null, "chat_id": -100, "engine": "codex", "project": "takopi", "cwd": ".", "user_msg_id": 1, "timestamp": "2026-01-15T22:33:08.908626Z", "level": "info", "logger": "takopi.runner_bridge"}
{"state_path": "/tmp/pytest-of-root/pytest-92/test_run_main_loop_auto_resume0/telegram_chat_prefs_state.json", "event": "chat_prefs.enabled", "timestamp": "2026-01-15T22:33:08.915761Z", "level": "info", "logger": "takopi.telegram.loop"}
{"scope": "main", "resolved_scope": "main", "state_path": "/tmp/pytest-of-root/pytest-92/test_run_main_loop_auto_resume0/telegram_topics_state.json", "event": "topics.enabled", "timestamp": "2026-01-15T22:33:08.915909Z", "level": "info", "logger": "takopi.telegram.loop"}
{"commands": ["codex", "claude", "proj", "new", "agent", "model", "reasoning", "trigger", "topic", "ctx", "cancel"], "event": "startup.command_menu.updated", "timestamp": "2026-01-15T22:33:08.919054Z", "level": "info", "logger": "takopi.telegram.commands.menu"}
{"channel_id": 123, "user_msg_id": 1, "resume": "resume-claude", "text": "hello", "event": "handle.incoming", "branch": null, "chat_id": 123, "engine": "claude", "project": "proj", "cwd": "/tmp/pytest-of-root/pytest-92/test_run_main_loop_auto_resume0", "timestamp": "2026-01-15T22:33:09.921321Z", "level": "info", "logger": "takopi.runner_bridge"}
{"ok": true, "error": null, "answer_len": 2, "elapsed_s": 0.0, "action_count": 0, "resume": "resume-claude", "event": "runner.completed", "branch": null, "chat_id": 123, "engine": "claude", "project": "proj", "cwd": "/tmp/pytest-of-root/pytest-92/test_run_main_loop_auto_resume0", "user_msg_id": 1, "timestamp": "2026-01-15T22:33:09.922925Z", "level": "info", "logger": "takopi.runner_bridge"}
{"state_path": "/tmp/pytest-of-root/pytest-92/test_run_main_loop_auto_resume1/telegram_chat_prefs_state.json", "event": "chat_prefs.enabled", "timestamp": "2026-01-15T22:33:09.929215Z", "level": "info", "logger": "takopi.telegram.loop"}
{"state_path": "/tmp/pytest-of-root/pytest-92/test_run_main_loop_auto_resume1/telegram_chat_sessions_state.json", "event": "chat_sessions.enabled", "timestamp": "2026-01-15T22:33:09.929337Z", "level": "info", "logger": "takopi.telegram.loop"}
{"commands": ["codex", "proj", "new", "agent", "model", "reasoning", "trigger", "cancel"], "event": "startup.command_menu.updated", "timestamp": "2026-01-15T22:33:09.932477Z", "level": "info", "logger": "takopi.telegram.commands.menu"}
{"channel_id": 123, "user_msg_id": 1, "resume": null, "text": "hello", "event": "handle.incoming", "branch": null, "chat_id": 123, "engine": "codex", "project": "proj", "cwd": "/tmp/pytest-of-root/pytest-92/test_run_main_loop_auto_resume1", "timestamp": "2026-01-15T22:33:10.934416Z", "level": "info", "logger": "takopi.runner_bridge"}
{"ok": true, "error": null, "answer_len": 2, "elapsed_s": 0.0, "action_count": 0, "resume": "resume-123", "event": "runner.completed", "branch": null, "chat_id": 123, "engine": "codex", "project": "proj", "cwd": "/tmp/pytest-of-root/pytest-92/test_run_main_loop_auto_resume1", "user_msg_id": 1, "timestamp": "2026-01-15T22:33:10.935633Z", "level": "info", "logger": "takopi.runner_bridge"}
{"state_path": "/tmp/pytest-of-root/pytest-92/test_run_main_loop_auto_resume1/telegram_chat_prefs_state.json", "event": "chat_prefs.enabled", "timestamp": "2026-01-15T22:33:10.940219Z", "level": "info", "logger": "takopi.telegram.loop"}
{"state_path": "/tmp/pytest-of-root/pytest-92/test_run_main_loop_auto_resume1/telegram_chat_sessions_state.json", "event": "chat_sessions.enabled", "timestamp": "2026-01-15T22:33:10.940340Z", "level": "info", "logger": "takopi.telegram.loop"}
{"commands": ["codex", "new", "agent", "model", "reasoning", "trigger", "cancel"], "event": "startup.command_menu.updated", "timestamp": "2026-01-15T22:33:10.943832Z", "level": "info", "logger": "takopi.telegram.commands.menu"}
{"channel_id": 123, "user_msg_id": 2, "resume": "resume-123", "text": "followup", "event": "handle.incoming", "chat_id": 123, "engine": "codex", "timestamp": "2026-01-15T22:33:11.945845Z", "level": "info", "logger": "takopi.runner_bridge"}
{"ok": true, "error": null, "answer_len": 2, "elapsed_s": 0.0, "action_count": 0, "resume": "resume-123", "event": "runner.completed", "chat_id": 123, "engine": "codex", "user_msg_id": 2, "timestamp": "2026-01-15T22:33:11.947050Z", "level": "info", "logger": "takopi.runner_bridge"}
{"commands": ["codex", "proj", "other", "new", "agent", "model", "reasoning", "trigger", "file", "cancel"], "event": "startup.command_menu.updated", "timestamp": "2026-01-15T22:33:11.955433Z", "level": "info", "logger": "takopi.telegram.commands.menu"}
{"channel_id": 123, "user_msg_id": 1, "resume": null, "text": "do thing\n\n[uploaded file: incoming/hello.txt]", "event": "handle.incoming", "branch": null, "chat_id": 123, "engine": "codex", "project": "other", "cwd": "/tmp/pytest-of-root/pytest-92/test_run_main_loop_prompt_uplo0/other", "timestamp": "2026-01-15T22:33:11.956216Z", "level": "info", "logger": "takopi.runner_bridge"}
{"ok": true, "error": null, "answer_len": 2, "elapsed_s": 0.0, "action_count": 0, "resume": "0d236d0275b448af96a6c85a25f9b607", "event": "runner.completed", "branch": null, "chat_id": 123, "engine": "codex", "project": "other", "cwd": "/tmp/pytest-of-root/pytest-92/test_run_main_loop_prompt_uplo0/other", "user_msg_id": 1, "timestamp": "2026-01-15T22:33:11.957011Z", "level": "info", "logger": "takopi.runner_bridge"}
{"commands": ["claude", "codex", "new", "agent", "model", "reasoning", "trigger", "cancel"], "event": "startup.command_menu.updated", "timestamp": "2026-01-15T22:33:11.961638Z", "level": "info", "logger": "takopi.telegram.commands.menu"}
{"channel_id": 123, "user_msg_id": 1, "resume": null, "text": "(voice transcribed) do thing", "event": "handle.incoming", "chat_id": 123, "engine": "codex", "timestamp": "2026-01-15T22:33:12.963251Z", "level": "info", "logger": "takopi.runner_bridge"}
{"ok": true, "error": null, "answer_len": 5, "elapsed_s": 0.0, "action_count": 0, "resume": "408aef3161d445b3a45dd1c4509462a0", "event": "runner.completed", "chat_id": 123, "engine": "codex", "user_msg_id": 1, "timestamp": "2026-01-15T22:33:12.964214Z", "level": "info", "logger": "takopi.runner_bridge"}
{"commands": ["claude", "codex", "new", "agent", "model", "reasoning", "trigger", "cancel"], "event": "startup.command_menu.updated", "timestamp": "2026-01-15T22:33:12.971969Z", "level": "info", "logger": "takopi.telegram.commands.menu"}
{"channel_id": 123, "user_msg_id": 1, "resume": null, "text": "summarize these\n\na\n\nb\n\nc", "event": "handle.incoming", "chat_id": 123, "engine": "codex", "timestamp": "2026-01-15T22:33:13.473326Z", "level": "info", "logger": "takopi.runner_bridge"}
{"ok": true, "error": null, "answer_len": 5, "elapsed_s": 0.0, "action_count": 0, "resume": "8eb0914266b34af1a0b1019ed0400aa6", "event": "runner.completed", "chat_id": 123, "engine": "codex", "user_msg_id": 1, "timestamp": "2026-01-15T22:33:13.474150Z", "level": "info", "logger": "takopi.runner_bridge"}
{"commands": ["codex", "new", "agent", "model", "reasoning", "trigger", "cancel"], "event": "startup.command_menu.updated", "timestamp": "2026-01-15T22:33:14.481218Z", "level": "info", "logger": "takopi.telegram.commands.menu"}
{"state_path": "/tmp/pytest-of-root/pytest-92/test_run_main_loop_prompt_uplo1/telegram_chat_prefs_state.json", "event": "chat_prefs.enabled", "timestamp": "2026-01-15T22:33:14.485748Z", "level": "info", "logger": "takopi.telegram.loop"}
{"state_path": "/tmp/pytest-of-root/pytest-92/test_run_main_loop_prompt_uplo1/telegram_chat_sessions_state.json", "event": "chat_sessions.enabled", "timestamp": "2026-01-15T22:33:14.485849Z", "level": "info", "logger": "takopi.telegram.loop"}
{"commands": ["codex", "proj", "new", "agent", "model", "reasoning", "trigger", "file", "cancel"], "event": "startup.command_menu.updated", "timestamp": "2026-01-15T22:33:14.488409Z", "level": "info", "logger": "takopi.telegram.commands.menu"}
{"channel_id": 123, "user_msg_id": 1, "resume": null, "text": "hello\n\n[uploaded file: incoming/hello.txt]", "event": "handle.incoming", "branch": null, "chat_id": 123, "engine": "codex", "project": "proj", "cwd": "/tmp/pytest-of-root/pytest-92/test_run_main_loop_prompt_uplo1/proj", "timestamp": "2026-01-15T22:33:14.489137Z", "level": "info", "logger": "takopi.runner_bridge"}
{"ok": true, "error": null, "answer_len": 2, "elapsed_s": 0.0, "action_count": 0, "resume": "resume-123", "event": "runner.completed", "branch": null, "chat_id": 123, "engine": "codex", "project": "proj", "cwd": "/tmp/pytest-of-root/pytest-92/test_run_main_loop_prompt_uplo1/proj", "user_msg_id": 1, "timestamp": "2026-01-15T22:33:14.490000Z", "level": "info", "logger": "takopi.runner_bridge"}
{"state_path": "/tmp/pytest-of-root/pytest-92/test_run_main_loop_prompt_uplo1/telegram_chat_prefs_state.json", "event": "chat_prefs.enabled", "timestamp": "2026-01-15T22:33:14.492872Z", "level": "info", "logger": "takopi.telegram.loop"}
{"state_path": "/tmp/pytest-of-root/pytest-92/test_run_main_loop_prompt_uplo1/telegram_chat_sessions_state.json", "event": "chat_sessions.enabled", "timestamp": "2026-01-15T22:33:14.492958Z", "level": "info", "logger": "takopi.telegram.loop"}
{"commands": ["codex", "proj", "new", "agent", "model", "reasoning", "trigger", "file", "cancel"], "event": "startup.command_menu.updated", "timestamp": "2026-01-15T22:33:14.495264Z", "level": "info", "logger": "takopi.telegram.commands.menu"}
{"channel_id": 123, "user_msg_id": 2, "resume": "resume-123", "text": "followup\n\n[uploaded file: incoming/hello2.txt]", "event": "handle.incoming", "branch": null, "chat_id": 123, "engine": "codex", "project": "proj", "cwd": "/tmp/pytest-of-root/pytest-92/test_run_main_loop_prompt_uplo1/proj", "timestamp": "2026-01-15T22:33:14.496011Z", "level": "info", "logger": "takopi.runner_bridge"}
{"ok": true, "error": null, "answer_len": 2, "elapsed_s": 0.0, "action_count": 0, "resume": "resume-123", "event": "runner.completed", "branch": null, "chat_id": 123, "engine": "codex", "project": "proj", "cwd": "/tmp/pytest-of-root/pytest-92/test_run_main_loop_prompt_uplo1/proj", "user_msg_id": 2, "timestamp": "2026-01-15T22:33:14.496874Z", "level": "info", "logger": "takopi.runner_bridge"}
{"state_path": "/tmp/pytest-of-root/pytest-92/test_run_main_loop_command_upd0/telegram_chat_prefs_state.json", "event": "chat_prefs.enabled", "timestamp": "2026-01-15T22:33:14.498551Z", "level": "info", "logger": "takopi.telegram.loop"}
{"state_path": "/tmp/pytest-of-root/pytest-92/test_run_main_loop_command_upd0/telegram_chat_sessions_state.json", "event": "chat_sessions.enabled", "timestamp": "2026-01-15T22:33:14.498649Z", "level": "info", "logger": "takopi.telegram.loop"}
{"commands": ["codex", "run_cmd", "new", "agent", "model", "reasoning", "trigger", "cancel"], "event": "startup.command_menu.updated", "timestamp": "2026-01-15T22:33:14.498777Z", "level": "info", "logger": "takopi.telegram.commands.menu"}
{"channel_id": 123, "user_msg_id": 1, "resume": null, "text": "hello", "event": "handle.incoming", "chat_id": 123, "engine": "codex", "timestamp": "2026-01-15T22:33:14.499083Z", "level": "info", "logger": "takopi.runner_bridge"}
{"ok": true, "error": null, "answer_len": 2, "elapsed_s": 0.0, "action_count": 0, "resume": "resume-123", "event": "runner.completed", "chat_id": 123, "engine": "codex", "user_msg_id": 1, "timestamp": "2026-01-15T22:33:14.499822Z", "level": "info", "logger": "takopi.runner_bridge"}
{"state_path": "/tmp/pytest-of-root/pytest-92/test_run_main_loop_command_upd0/telegram_chat_prefs_state.json", "event": "chat_prefs.enabled", "timestamp": "2026-01-15T22:33:14.500135Z", "level": "info", "logger": "takopi.telegram.loop"}
{"state_path": "/tmp/pytest-of-root/pytest-92/test_run_main_loop_command_upd0/telegram_chat_sessions_state.json", "event": "chat_sessions.enabled", "timestamp": "2026-01-15T22:33:14.500211Z", "level": "info", "logger": "takopi.telegram.loop"}
{"commands": ["codex", "run_cmd", "new", "agent", "model", "reasoning", "trigger", "cancel"], "event": "startup.command_menu.updated", "timestamp": "2026-01-15T22:33:14.500285Z", "level": "info", "logger": "takopi.telegram.commands.menu"}
{"channel_id": 123, "user_msg_id": 2, "resume": "resume-123", "text": "followup", "event": "handle.incoming", "chat_id": 123, "engine": "codex", "timestamp": "2026-01-15T22:33:15.502169Z", "level": "info", "logger": "takopi.runner_bridge"}
{"ok": true, "error": null, "answer_len": 2, "elapsed_s": 0.0, "action_count": 0, "resume": "resume-123", "event": "runner.completed", "chat_id": 123, "engine": "codex", "user_msg_id": 2, "timestamp": "2026-01-15T22:33:15.503417Z", "level": "info", "logger": "takopi.runner_bridge"}
{"state_path": "/tmp/pytest-of-root/pytest-92/test_run_main_loop_hides_resum0/telegram_chat_prefs_state.json", "event": "chat_prefs.enabled", "timestamp": "2026-01-15T22:33:15.508231Z", "level": "info", "logger": "takopi.telegram.loop"}
{"state_path": "/tmp/pytest-of-root/pytest-92/test_run_main_loop_hides_resum0/telegram_chat_sessions_state.json", "event": "chat_sessions.enabled", "timestamp": "2026-01-15T22:33:15.508332Z", "level": "info", "logger": "takopi.telegram.loop"}
{"commands": ["codex", "proj", "new", "agent", "model", "reasoning", "trigger", "cancel"], "event": "startup.command_menu.updated", "timestamp": "2026-01-15T22:33:15.510927Z", "level": "info", "logger": "takopi.telegram.commands.menu"}
{"channel_id": 123, "user_msg_id": 1, "resume": null, "text": "hello", "event": "handle.incoming", "branch": null, "chat_id": 123, "engine": "codex", "project": "proj", "cwd": "/tmp/pytest-of-root/pytest-92/test_run_main_loop_hides_resum0", "timestamp": "2026-01-15T22:33:16.512831Z", "level": "info", "logger": "takopi.runner_bridge"}
{"ok": true, "error": null, "answer_len": 2, "elapsed_s": 0.0, "action_count": 0, "resume": "resume-123", "event": "runner.completed", "branch": null, "chat_id": 123, "engine": "codex", "project": "proj", "cwd": "/tmp/pytest-of-root/pytest-92/test_run_main_loop_hides_resum0", "user_msg_id": 1, "timestamp": "2026-01-15T22:33:16.514189Z", "level": "info", "logger": "takopi.runner_bridge"}
{"state_path": "/tmp/pytest-of-root/pytest-92/test_run_main_loop_chat_sessio0/telegram_chat_prefs_state.json", "event": "chat_prefs.enabled", "timestamp": "2026-01-15T22:33:16.519869Z", "level": "info", "logger": "takopi.telegram.loop"}
{"state_path": "/tmp/pytest-of-root/pytest-92/test_run_main_loop_chat_sessio0/telegram_chat_sessions_state.json", "event": "chat_sessions.enabled", "timestamp": "2026-01-15T22:33:16.519988Z", "level": "info", "logger": "takopi.telegram.loop"}
{"commands": ["codex", "new", "agent", "model", "reasoning", "trigger", "cancel"], "event": "startup.command_menu.updated", "timestamp": "2026-01-15T22:33:16.522940Z", "level": "info", "logger": "takopi.telegram.commands.menu"}
{"channel_id": -100, "user_msg_id": 1, "resume": null, "text": "hello", "event": "handle.incoming", "chat_id": -100, "engine": "codex", "timestamp": "2026-01-15T22:33:17.524760Z", "level": "info", "logger": "takopi.runner_bridge"}
{"ok": true, "error": null, "answer_len": 2, "elapsed_s": 0.0, "action_count": 0, "resume": "resume-group", "event": "runner.completed", "chat_id": -100, "engine": "codex", "user_msg_id": 1, "timestamp": "2026-01-15T22:33:17.526020Z", "level": "info", "logger": "takopi.runner_bridge"}
{"state_path": "/tmp/pytest-of-root/pytest-92/test_run_main_loop_chat_sessio0/telegram_chat_prefs_state.json", "event": "chat_prefs.enabled", "timestamp": "2026-01-15T22:33:17.529553Z", "level": "info", "logger": "takopi.telegram.loop"}
{"state_path": "/tmp/pytest-of-root/pytest-92/test_run_main_loop_chat_sessio0/telegram_chat_sessions_state.json", "event": "chat_sessions.enabled", "timestamp": "2026-01-15T22:33:17.529682Z", "level": "info", "logger": "takopi.telegram.loop"}
{"commands": ["codex", "new", "agent", "model", "reasoning", "trigger", "cancel"], "event": "startup.command_menu.updated", "timestamp": "2026-01-15T22:33:17.532591Z", "level": "info", "logger": "takopi.telegram.commands.menu"}
{"channel_id": -100, "user_msg_id": 2, "resume": null, "text": "followup", "event": "handle.incoming", "chat_id": -100, "engine": "codex", "timestamp": "2026-01-15T22:33:18.534415Z", "level": "info", "logger": "takopi.runner_bridge"}
{"ok": true, "error": null, "answer_len": 2, "elapsed_s": 0.0, "action_count": 0, "resume": "871ff6d8c52741ce899091921142a6c6", "event": "runner.completed", "chat_id": -100, "engine": "codex", "user_msg_id": 2, "timestamp": "2026-01-15T22:33:18.535553Z", "level": "info", "logger": "takopi.runner_bridge"}
{"state_path": "/tmp/pytest-of-root/pytest-92/test_run_main_loop_new_clears_0/telegram_chat_prefs_state.json", "event": "chat_prefs.enabled", "timestamp": "2026-01-15T22:33:18.540415Z", "level": "info", "logger": "takopi.telegram.loop"}
{"state_path": "/tmp/pytest-of-root/pytest-92/test_run_main_loop_new_clears_0/telegram_chat_sessions_state.json", "event": "chat_sessions.enabled", "timestamp": "2026-01-15T22:33:18.540505Z", "level": "info", "logger": "takopi.telegram.loop"}
{"commands": ["codex", "new", "agent", "model", "reasoning", "trigger", "cancel"], "event": "startup.command_menu.updated", "timestamp": "2026-01-15T22:33:18.543004Z", "level": "info", "logger": "takopi.telegram.commands.menu"}
{"state_path": "/tmp/pytest-of-root/pytest-92/test_run_main_loop_new_clears_1/telegram_chat_prefs_state.json", "event": "chat_prefs.enabled", "timestamp": "2026-01-15T22:33:18.548162Z", "level": "info", "logger": "takopi.telegram.loop"}
{"scope": "main", "resolved_scope": "main", "state_path": "/tmp/pytest-of-root/pytest-92/test_run_main_loop_new_clears_1/telegram_topics_state.json", "event": "topics.enabled", "timestamp": "2026-01-15T22:33:18.548270Z", "level": "info", "logger": "takopi.telegram.loop"}
{"commands": ["codex", "new", "agent", "model", "reasoning", "trigger", "topic", "ctx", "cancel"], "event": "startup.command_menu.updated", "timestamp": "2026-01-15T22:33:18.551027Z", "level": "info", "logger": "takopi.telegram.commands.menu"}
{"commands": ["codex", "new", "agent", "model", "reasoning", "trigger", "cancel"], "event": "startup.command_menu.updated", "timestamp": "2026-01-15T22:33:18.558263Z", "level": "info", "logger": "takopi.telegram.commands.menu"}
{"channel_id": 123, "user_msg_id": 1, "resume": null, "text": "hello", "event": "handle.incoming", "chat_id": 123, "engine": "codex", "timestamp": "2026-01-15T22:33:19.559831Z", "level": "info", "logger": "takopi.runner_bridge"}
{"ok": true, "error": null, "answer_len": 2, "elapsed_s": 0.0, "action_count": 0, "resume": "23f1755c59994d8394de8b5b3cb791a8", "event": "runner.completed", "chat_id": 123, "engine": "codex", "user_msg_id": 1, "timestamp": "2026-01-15T22:33:19.560712Z", "level": "info", "logger": "takopi.runner_bridge"}
{"commands": ["codex", "proj", "new", "agent", "model", "reasoning", "trigger", "file", "cancel"], "event": "startup.command_menu.updated", "timestamp": "2026-01-15T22:33:19.567953Z", "level": "info", "logger": "takopi.telegram.commands.menu"}
{"commands": ["codex", "echo_cmd", "new", "agent", "model", "reasoning", "trigger", "cancel"], "event": "startup.command_menu.updated", "timestamp": "2026-01-15T22:33:20.619724Z", "level": "info", "logger": "takopi.telegram.commands.menu"}
{"commands": ["codex", "pi", "proj", "use_project", "new", "agent", "model", "reasoning", "trigger", "cancel"], "event": "startup.command_menu.updated", "timestamp": "2026-01-15T22:33:20.621290Z", "level": "info", "logger": "takopi.telegram.commands.menu"}
{"channel_id": 123, "user_msg_id": 1, "resume": null, "text": "hello", "event": "handle.incoming", "branch": null, "chat_id": 123, "engine": "pi", "project": "proj", "cwd": ".", "timestamp": "2026-01-15T22:33:20.621602Z", "level": "info", "logger": "takopi.runner_bridge"}
{"ok": true, "error": null, "answer_len": 2, "elapsed_s": 0.0, "action_count": 0, "resume": "38b826c6719c48269e5d613a2fd92bc0", "event": "runner.completed", "branch": null, "chat_id": 123, "engine": "pi", "project": "proj", "cwd": ".", "user_msg_id": 1, "timestamp": "2026-01-15T22:33:20.622283Z", "level": "info", "logger": "takopi.runner_bridge"}
{"commands": ["codex", "pi", "proj", "auto_ctx", "new", "agent", "model", "reasoning", "trigger", "cancel"], "event": "startup.command_menu.updated", "timestamp": "2026-01-15T22:33:20.623682Z", "level": "info", "logger": "takopi.telegram.commands.menu"}
{"channel_id": -42, "user_msg_id": 1, "resume": null, "text": "hello", "event": "handle.incoming", "branch": null, "chat_id": -42, "engine": "pi", "project": "proj", "cwd": ".", "timestamp": "2026-01-15T22:33:20.623928Z", "level": "info", "logger": "takopi.runner_bridge"}
{"ok": true, "error": null, "answer_len": 2, "elapsed_s": 0.0, "action_count": 0, "resume": "0677cedc52f44a77b90bedb8b847e096", "event": "runner.completed", "branch": null, "chat_id": -42, "engine": "pi", "project": "proj", "cwd": ".", "user_msg_id": 1, "timestamp": "2026-01-15T22:33:20.624526Z", "level": "info", "logger": "takopi.runner_bridge"}
{"commands": ["codex", "late_cmd", "new", "agent", "model", "reasoning", "trigger", "cancel"], "event": "startup.command_menu.updated", "timestamp": "2026-01-15T22:33:20.625793Z", "level": "info", "logger": "takopi.telegram.commands.menu"}
{"state_path": "/tmp/pytest-of-root/pytest-92/test_run_main_loop_mentions_on0/telegram_chat_prefs_state.json", "event": "chat_prefs.enabled", "timestamp": "2026-01-15T22:33:20.630632Z", "level": "info", "logger": "takopi.telegram.loop"}
{"commands": ["codex", "new", "agent", "model", "reasoning", "trigger", "file", "cancel"], "event": "startup.command_menu.updated", "timestamp": "2026-01-15T22:33:20.633085Z", "level": "info", "logger": "takopi.telegram.commands.menu"}
{"method": "sendMessage", "status": 429, "url": "https://api.telegram.org/bot[REDACTED]/sendMessage", "retry_after": 3.0, "event": "telegram.rate_limited", "timestamp": "2026-01-15T22:33:20.654779Z", "level": "warning", "logger": "takopi.telegram.client_api"}
{"method": "getUpdates", "payload": {"timeout": 1}, "event": "telegram.request", "timestamp": "2026-01-15T22:33:20.656098Z", "level": "debug", "logger": "takopi.telegram.client_api"}
{"method": "getUpdates", "status": 500, "url": "https://api.telegram.org/bot[REDACTED]/getUpdates", "error": "Server error '500 Internal Server Error' for url 'https://api.telegram.org/bot[REDACTED]/getUpdates'\nFor more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/500", "body": "oops", "event": "telegram.http_error", "timestamp": "2026-01-15T22:33:20.656550Z", "level": "error", "logger": "takopi.telegram.client_api"}
{"method": "sendDocument", "payload": {"chat_id": 1}, "event": "telegram.request", "timestamp": "2026-01-15T22:33:20.657750Z", "level": "debug", "logger": "takopi.telegram.client_api"}
{"method": "sendDocument", "status": 429, "url": "https://api.telegram.org/bot[REDACTED]/sendDocument", "retry_after": 2.0, "event": "telegram.rate_limited", "timestamp": "2026-01-15T22:33:20.660272Z", "level": "warning", "logger": "takopi.telegram.client_api"}
{"method": "sendMessage", "payload": {"chat_id": 1, "text": "hi"}, "event": "telegram.request", "timestamp": "2026-01-15T22:33:20.661328Z", "level": "debug", "logger": "takopi.telegram.client_api"}
{"method": "sendMessage", "status": 429, "url": "https://api.telegram.org/bot[REDACTED]/sendMessage", "retry_after": 5.0, "event": "telegram.rate_limited", "timestamp": "2026-01-15T22:33:20.661648Z", "level": "warning", "logger": "takopi.telegram.client_api"}
{"method": "getUpdates", "payload": {"timeout": 1}, "event": "telegram.request", "timestamp": "2026-01-15T22:33:20.662701Z", "level": "debug", "logger": "takopi.telegram.client_api"}
{"method": "getUpdates", "url": "https://api.telegram.org/bot[REDACTED]/getUpdates", "payload": {"ok": false, "error_code": 400, "description": "bad"}, "event": "telegram.api_error", "timestamp": "2026-01-15T22:33:20.663030Z", "level": "error", "logger": "takopi.telegram.client_api"}
{"method": "getUpdates", "payload": {"timeout": 1}, "event": "telegram.request", "timestamp": "2026-01-15T22:33:20.664101Z", "level": "debug", "logger": "takopi.telegram.client_api"}
{"method": "getUpdates", "url": "https://api.telegram.org/bot[REDACTED]/getUpdates", "payload": ["not", "a", "dict"], "event": "telegram.invalid_payload", "timestamp": "2026-01-15T22:33:20.664407Z", "level": "error", "logger": "takopi.telegram.client_api"}
{"method": "getMe", "payload": {}, "event": "telegram.request", "timestamp": "2026-01-15T22:33:20.665581Z", "level": "debug", "logger": "takopi.telegram.client_api"}
{"method": "getMe", "payload": {"ok": true, "result": {"username": "bot-only"}}, "event": "telegram.response", "timestamp": "2026-01-15T22:33:20.665877Z", "level": "debug", "logger": "takopi.telegram.client_api"}
{"method": "getMe", "error": "Object missing required field `id`", "error_type": "ValidationError", "event": "telegram.decode_error", "timestamp": "2026-01-15T22:33:20.666087Z", "level": "error", "logger": "takopi.telegram.client_api"}
{"method": "download_file", "status": 429, "url": "https://api.telegram.org/file/bot[REDACTED]/path/to/file", "retry_after": 3.0, "event": "telegram.rate_limited", "timestamp": "2026-01-15T22:33:20.667417Z", "level": "warning", "logger": "takopi.telegram.client_api"}
{"method": "download_file", "status": 429, "url": "https://api.telegram.org/file/bot[REDACTED]/path", "retry_after": 5.0, "event": "telegram.rate_limited", "timestamp": "2026-01-15T22:33:20.668795Z", "level": "warning", "logger": "takopi.telegram.client_api"}
